import{aG as fs,aH as ys,_ as bt,aI as bn,a as J,aJ as qe,j as t,s as g,aK as vn,aL as we,r as x,aM as ms,b as Pe,aN as gt,aO as $e,aP as js,aQ as A,aR as W,aS as Sn,V as Z,A as Cn,m as bs,l as vs,n as Tn,o as wn,aT as Ss,u as Cs,h as q,as as ie,aU as pe,aV as ce,e as H,aW as vt,aX as te,aY as ue,B,T as z,C as L,aZ as kn,L as ae,D as xe,J as Rn,y as ee,a_ as St,a$ as Dn,M as Se,b0 as De,b1 as We,b2 as Ce,b3 as Ts,b4 as He,b5 as K,b6 as ws,b7 as zt,b8 as Ue,b9 as Fe,ba as ks,bb as Oe,bc as fe,bd as Rs,be as An,bf as Ge,bg as En,bh as Ds,bi as Te,t as As,bj as Es,bk as Is,bl as In,v as $n,bm as Pn,bn as Fn,i as ne,bo as On,bp as _n,bq as Bn,br as zn,bs as $s,bt as le,am as Ln,bu as Mn,bv as Vn,bw as Ct,bx as Tt,by as Me,bz as Nn,bA as qn,N as Ae,bB as Lt,bC as Wn,bD as Hn,bE as Un,bF as Gn,bG as _e,bH as Yn,bI as Jn,bJ as Kn,bK as Ps,bL as Qn,bM as Xn,bN as Zn,bO as ea,bP as ve,bQ as ta,bR as sa,bS as na,bT as wt,bU as aa,bV as oa,bW as ra,bX as ia,bY as ca,bZ as Fs,b_ as Os,b$ as _s,O as la,c0 as Ye,c1 as Je,a3 as da,c2 as ua,K as kt,c3 as pa,c4 as Bs,c5 as ga,c6 as ha,c7 as Ke,c8 as xa,c9 as fa,ca as zs,cb as ya,cc as ma,cd as Ve,ce as Ls,cf as ja,al as Qe,cg as ba,ch as Ms,ci as va,cj as Sa,ck as Ca,cl as Ta,cm as wa,cn as Xe,co as ka,cp as Vs,cq as Ra,cr as ht,cs as Ns,ct as Da,cu as Aa,cv as Ea,cw as Ia,cx as $a,cy as Pa,cz as Fa,cA as Oa,cB as Re,cC as _a,cD as Ba,a8 as za,a9 as Ze,aa as Mt,cE as La,cF as Ma,cG as Va,cH as Na,cI as qa,cJ as qs,cK as Wa,G as Ee,H as Ie,cL as Ha,cM as Ua,cN as Ga,cO as Ya,cP as Ja,cQ as Ka,cR as Ws,cS as Qa,cT as Hs,cU as Xa,cV as Za,cW as Us,cX as be,cY as xt,cZ as eo,c_ as Gs,E as Ys,c$ as to,d0 as so,f as no,d1 as ao,d2 as et,d3 as Vt,aF as oo,d4 as ke,d5 as Nt,d6 as ro,d7 as io,d8 as co,aC as Rt,aD as lo,ax as qt,d9 as uo,da as po,db as go,dc as Wt,ak as Ne,dd as ho,ac as tt,ao as xo,ae as fo,af as yo,ag as mo,ah as jo,ai as bo,aj as vo,de as he,df as So,dg as Co,dh as Ht,di as To,dj as wo,dk as st,dl as ko,dm as Ro,dn as Do,x as Js,dp as Ao,dq as Ut,dr as Eo,ds as Io,dt as $o,d as Po,du as Fo,dv as Oo,dw as _o,dx as Bo,dy as zo,dz as Lo,dA as Mo,dB as Vo,dC as No,au as qo}from"./index-CBxzHo9v.js";import{u as Wo,a as Ho,F as Dt,M as Ks}from"./MarkCompletedDialogue-BxpNwvZk.js";import{F as At,a as ft,u as Qs,b as Uo,c as Go}from"./aggregateFeatureMetrics-B9YGjDrl.js";import{u as Yo,a as Jo,T as Ko,b as Qo,c as Xo,d as Zo,F as er,C as tr,e as sr,E as nr,f as ar}from"./FeatureStaleDialog-DOiJpKNC.js";function or(e){return ys("MuiPagination",e)}fs("MuiPagination",["root","ul","outlined","text"]);const rr=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function ir(e={}){const{boundaryCount:s=1,componentName:n="usePagination",count:a=1,defaultPage:o=1,disabled:r=!1,hideNextButton:i=!1,hidePrevButton:l=!1,onChange:c,page:p,showFirstButton:u=!1,showLastButton:d=!1,siblingCount:m=1}=e,j=bt(e,rr),[y,b]=bn({controlled:p,default:o,name:n,state:"page"}),h=(R,M)=>{p||b(M),c&&c(R,M)},f=(R,M)=>{const G=M-R+1;return Array.from({length:G},(Q,C)=>R+C)},w=f(1,Math.min(s,a)),E=f(Math.max(a-s+1,s+1),a),O=Math.max(Math.min(y-m,a-s-m*2-1),s+2),_=Math.min(Math.max(y+m,s+m*2+2),E.length>0?E[0]-2:a-1),$=[...u?["first"]:[],...l?[]:["previous"],...w,...O>s+2?["start-ellipsis"]:s+1<a-s?[s+1]:[],...f(O,_),..._<a-s-1?["end-ellipsis"]:a-s>s?[a-s]:[],...E,...i?[]:["next"],...d?["last"]:[]],D=R=>{switch(R){case"first":return 1;case"previous":return y-1;case"next":return y+1;case"last":return a;default:return null}},I=$.map(R=>typeof R=="number"?{onClick:M=>{h(M,R)},type:"page",page:R,selected:R===y,disabled:r,"aria-current":R===y?"true":void 0}:{onClick:M=>{h(M,D(R))},type:R,page:D(R),selected:!1,disabled:r||R.indexOf("ellipsis")===-1&&(R==="next"||R==="last"?y>=a:y<=1)});return J({items:I},j)}function cr(e){return ys("MuiPaginationItem",e)}const se=fs("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),Gt=qe(t.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Yt=qe(t.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Jt=qe(t.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Kt=qe(t.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),lr=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Xs=(e,s)=>{const{ownerState:n}=e;return[s.root,s[n.variant],s[`size${$e(n.size)}`],n.variant==="text"&&s[`text${$e(n.color)}`],n.variant==="outlined"&&s[`outlined${$e(n.color)}`],n.shape==="rounded"&&s.rounded,n.type==="page"&&s.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&s.ellipsis,(n.type==="previous"||n.type==="next")&&s.previousNext,(n.type==="first"||n.type==="last")&&s.firstLast]},dr=e=>{const{classes:s,color:n,disabled:a,selected:o,size:r,shape:i,type:l,variant:c}=e,p={root:["root",`size${$e(r)}`,c,i,n!=="standard"&&`${c}${$e(n)}`,a&&"disabled",o&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[l]],icon:["icon"]};return js(p,cr,s)},ur=g("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Xs})(({theme:e,ownerState:s})=>J({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${se.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},s.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},s.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),pr=g(vn,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Xs})(({theme:e,ownerState:s})=>J({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${se.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${se.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${se.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:we(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${se.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:we(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${se.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},s.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},s.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},s.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:s})=>J({},s.variant==="text"&&{[`&.${se.selected}`]:J({},s.color!=="standard"&&{color:(e.vars||e).palette[s.color].contrastText,backgroundColor:(e.vars||e).palette[s.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[s.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[s.color].main}},[`&.${se.focusVisible}`]:{backgroundColor:(e.vars||e).palette[s.color].dark}},{[`&.${se.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},s.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${se.selected}`]:J({},s.color!=="standard"&&{color:(e.vars||e).palette[s.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / 0.5)`:we(e.palette[s.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:we(e.palette[s.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:we(e.palette[s.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${se.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:we(e.palette[s.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${se.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),gr=g("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,s)=>s.icon})(({theme:e,ownerState:s})=>J({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},s.size==="small"&&{fontSize:e.typography.pxToRem(18)},s.size==="large"&&{fontSize:e.typography.pxToRem(22)})),hr=x.forwardRef(function(s,n){const a=ms({props:s,name:"MuiPaginationItem"}),{className:o,color:r="standard",component:i,components:l={},disabled:c=!1,page:p,selected:u=!1,shape:d="circular",size:m="medium",slots:j={},type:y="page",variant:b="text"}=a,h=bt(a,lr),f=J({},a,{color:r,disabled:c,selected:u,shape:d,size:m,type:y,variant:b}),w=Pe(),E=dr(f),_=(w.direction==="rtl"?{previous:j.next||l.next||Kt,next:j.previous||l.previous||Jt,last:j.first||l.first||Gt,first:j.last||l.last||Yt}:{previous:j.previous||l.previous||Jt,next:j.next||l.next||Kt,first:j.first||l.first||Gt,last:j.last||l.last||Yt})[y];return y==="start-ellipsis"||y==="end-ellipsis"?t.jsx(ur,{ref:n,ownerState:f,className:gt(E.root,o),children:"…"}):t.jsxs(pr,J({ref:n,ownerState:f,component:i,disabled:c,className:gt(E.root,o)},h,{children:[y==="page"&&p,_?t.jsx(gr,{as:_,ownerState:f,className:E.icon}):null]}))}),xr=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],fr=e=>{const{classes:s,variant:n}=e;return js({root:["root",n],ul:["ul"]},or,s)},yr=g("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:n}=e;return[s.root,s[n.variant]]}})({}),mr=g("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,s)=>s.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function jr(e,s,n){return e==="page"?`${n?"":"Go to "}page ${s}`:`Go to ${e} page`}const br=x.forwardRef(function(s,n){const a=ms({props:s,name:"MuiPagination"}),{boundaryCount:o=1,className:r,color:i="standard",count:l=1,defaultPage:c=1,disabled:p=!1,getItemAriaLabel:u=jr,hideNextButton:d=!1,hidePrevButton:m=!1,renderItem:j=I=>t.jsx(hr,J({},I)),shape:y="circular",showFirstButton:b=!1,showLastButton:h=!1,siblingCount:f=1,size:w="medium",variant:E="text"}=a,O=bt(a,xr),{items:_}=ir(J({},a,{componentName:"Pagination"})),$=J({},a,{boundaryCount:o,color:i,count:l,defaultPage:c,disabled:p,getItemAriaLabel:u,hideNextButton:d,hidePrevButton:m,renderItem:j,shape:y,showFirstButton:b,showLastButton:h,siblingCount:f,size:w,variant:E}),D=fr($);return t.jsx(yr,J({"aria-label":"pagination navigation",className:gt(D.root,r),ownerState:$,ref:n},O,{children:t.jsx(mr,{className:D.ul,ownerState:$,children:_.map((I,R)=>t.jsx("li",{children:j(J({},I,{color:i,"aria-label":u(I.type,I.page,I.selected),shape:y,size:w,variant:E}))},R))})}))}),vr=()=>{const e=A("projectId"),s=A("featureId"),{feature:n}=W(e,s);return n.name?t.jsx(Sn,{title:"Event log",feature:s}):null},Sr=()=>t.jsxs(Z,{severity:"warning",children:["Remember to update your Unleash client! Feature dependencies require new SDK versions. Read more about ",t.jsx(Cr,{}),"."]}),Cr=()=>t.jsx("a",{href:"https://docs.getunleash.io/reference/feature-toggles#feature-flag-dependencies",target:"_blank",rel:"noreferrer",children:"Client SDK support for feature dependencies"}),Tr=g(Cn)(({theme:e})=>({marginTop:e.spacing(2),marginBottom:e.spacing(1.5)})),wr=({project:e,parent:s,onSelect:n,selectedValues:a})=>{const{parentVariantOptions:o}=Wo(e,s),r=t.jsx(Tn,{fontSize:"small"}),i=t.jsx(wn,{fontSize:"small"});return t.jsx(Tr,{multiple:!0,id:"parent-variant-options",options:o,disableCloseOnSelect:!0,renderOption:(l,c,{selected:p})=>t.jsxs("li",{...l,children:[t.jsx(bs,{icon:r,checkedIcon:i,style:{marginRight:8},checked:p}),c]}),renderInput:l=>t.jsx(vs,{...l,placeholder:"Select values"}),fullWidth:!0,value:a,onChange:(l,c)=>{n(c)}})},de={key:"none (remove dependency)",label:"none (remove dependency)"},Zs=g(Ss)(({theme:e})=>({marginTop:e.spacing(2),marginBottom:e.spacing(1.5)})),kr=({onSelect:e,parentValue:s})=>t.jsx(Zs,{fullWidth:!0,options:[{key:"enabled",label:"enabled"},{key:"enabled_with_variants",label:"enabled with variants"},{key:"disabled",label:"disabled"}],value:s.status,onChange:e}),en=e=>{const{makeRequest:s,createRequest:n,errors:a,loading:o}=Cs({propagateErrors:!0}),r=async(p,u)=>{const d=n(`/api/admin/projects/${e}/features/${p}/dependencies`,{method:"POST",body:JSON.stringify(u)});await s(d.caller,d.id)},i=async(p,u)=>{const d=n(`/api/admin/projects/${e}/features/${p}/dependencies/${u}`,{method:"DELETE"});await s(d.caller,d.id)},l=async p=>{const u=n(`/api/admin/projects/${e}/features/${p}/dependencies`,{method:"DELETE"});await s(u.caller,u.id)},c=[n,s,q,e];return{addDependency:x.useCallback(r,c),removeDependency:x.useCallback(i,c),removeDependencies:x.useCallback(l,c),errors:a,loading:o}},Rr=(e,s,n,a,o)=>{const{trackEvent:r}=ie(),{addChange:i}=pe(),{refetch:l}=ce(e),{setToastData:c,setToastApiError:p}=H(),{refetchFeature:u}=W(e,s),d=vt(e)(),{isChangeRequestConfiguredInAnyEnv:m}=te(e),{addDependency:j,removeDependencies:y}=en(e),b=async h=>{if(!d){console.error("No change request environment");return}h==="addDependency"&&(await i(e,d,[{action:h,feature:s,payload:{feature:n,enabled:a.status!=="disabled",variants:a.status==="enabled_with_variants"?a.variants:[]}}]),r("dependent_features",{props:{eventType:"dependency added"}})),h==="deleteDependency"&&await i(e,d,[{action:h,feature:s,payload:void 0}]),l(),c({type:"success",text:"Change added to draft"})};return async()=>{try{if(m()){const h=n===de.key?"deleteDependency":"addDependency";await b(h),r("dependent_features",{props:{eventType:h==="addDependency"?"add dependency added to change request":"delete dependency added to change request"}})}else n===de.key?(await y(s),r("dependent_features",{props:{eventType:"dependency removed"}}),c({text:"Dependency removed",type:"success"})):(await j(s,{feature:n,enabled:a.status!=="disabled",variants:a.status==="enabled_with_variants"?a.variants:[]}),r("dependent_features",{props:{eventType:"dependency added"}}),c({text:"Dependency added",type:"success"}))}catch(h){p(q(h))}u(),o()}},Dr=({project:e,featureId:s,parent:n,onSelect:a})=>{const{parentOptions:o}=Ho(e,s),r=o?[de,...o.map(i=>({key:i,label:i}))]:[de];return t.jsx(Zs,{fullWidth:!0,options:r,value:n,onChange:a})},Ar=({project:e,featureId:s,parentDependency:n,showDependencyDialogue:a,onClose:o})=>{const[r,i]=x.useState((n==null?void 0:n.feature)||de.key),l=()=>{var f;return n?(f=n.variants)!=null&&f.length?{status:"enabled_with_variants",variants:n.variants}:n.enabled===!1?{status:"disabled"}:{status:"enabled"}:{status:"enabled"}},[c,p]=x.useState(l),u=()=>{i((n==null?void 0:n.feature)||de.key),p(l())};x.useEffect(()=>{u()},[JSON.stringify(n)]);const d=Rr(e,s,r,c,o),{isChangeRequestConfiguredInAnyEnv:m}=te(e),j=r!==de.key,y=r!==de.key&&c.status==="enabled_with_variants",b=f=>{(f==="enabled"||f==="disabled")&&p({status:f}),f==="enabled_with_variants"&&p({status:f,variants:[]})},h=f=>{p({status:"enabled_with_variants",variants:f})};return t.jsx(ue,{open:a,title:"Add parent flag dependency",onClose:o,onClick:d,primaryButtonText:m()?"Add change to draft":r===de.key?"Remove":"Add",secondaryButtonText:"Cancel",children:t.jsxs(B,{children:[t.jsx(Sr,{}),t.jsxs(B,{sx:{mt:2,mb:4},children:["Your feature will be evaluated only when the selected parent feature is"," ",t.jsx("b",{children:c.status==="disabled"?"disabled":"enabled"})," ","in the same environment."]}),t.jsxs(z,{children:["What ",t.jsx("b",{children:"feature"})," do you want to depend on?"]}),t.jsx(L,{condition:a,show:t.jsx(Dr,{project:e,featureId:s,parent:r,onSelect:f=>{p({status:"enabled"}),i(f)}})}),t.jsx(L,{condition:j,show:t.jsxs(B,{sx:{mt:2},children:[t.jsxs(z,{children:["What ",t.jsx("b",{children:"feature status"})," do you want to depend on?"]}),t.jsx(kr,{parentValue:c,onSelect:b})]})}),t.jsx(L,{condition:y,show:c.status==="enabled_with_variants"&&t.jsxs(B,{sx:{mt:2},children:[t.jsxs(z,{children:["What ",t.jsx("b",{children:"variant"})," do you want to depend on?"]}),t.jsx(wr,{parent:r,project:e,selectedValues:c.variants,onSelect:h})]})})]})})};g("div")({display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"});g("div")(({theme:e})=>({justifyContent:"center",paddingTop:e.spacing(.75),...kn}));g("span")(({theme:e})=>({color:e.palette.text.secondary,marginRight:e.spacing(1)}));const Et=g(ae)(({theme:e})=>({maxWidth:"100%",textDecoration:"none","&:hover, &:focus":{textDecoration:"underline"}})),Er=g(xe)(({theme:e})=>({height:e.spacing(3.5),width:e.spacing(3.5)})),Ir=g(Rn)(({theme:e})=>({borderRadius:e.shape.borderRadiusLarge,padding:e.spacing(1,1.5)})),tn=({capabilityId:e,feature:s,onEdit:n,onDelete:a})=>{const o=`${e}-${s}-actions`,r=`${o}-menu`,[i,l]=x.useState(null),c=!!i,p=d=>{l(d.currentTarget)},u=()=>{l(null)};return t.jsxs(B,{children:[t.jsx(ee,{title:"Dependency actions",arrow:!0,describeChild:!0,children:t.jsx(Er,{id:o,"aria-controls":c?r:void 0,"aria-haspopup":"true","aria-expanded":c?"true":void 0,onClick:p,type:"button",children:t.jsx(St,{})})}),t.jsx(Ir,{id:r,anchorEl:i,open:c,onClose:u,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},disableScrollLock:!0,children:t.jsxs(Dn,{"aria-labelledby":o,children:[t.jsxs(Se,{onClick:()=>{n(),u()},children:[t.jsx(De,{children:t.jsx(We,{})}),t.jsx(Ce,{children:t.jsx(z,{variant:"body2",children:"Edit"})})]}),t.jsxs(Se,{onClick:()=>{a(),u()},children:[t.jsx(De,{children:t.jsx(Ts,{})}),t.jsx(Ce,{children:t.jsx(z,{variant:"body2",children:"Delete"})})]})]})})]})},$r=({childFeatures:e,project:s})=>t.jsx(He,{tooltip:t.jsx(t.Fragment,{children:e.map(n=>t.jsx(Et,{to:`/projects/${s}/features/${n}`,children:t.jsx("div",{children:n})},`${s}-${n}`))}),children:e.length===1?"1 feature":`${e.length} features`}),Pr=({variants:e})=>e.length===1&&e[0].length<20?t.jsx("span",{children:e[0]}):t.jsx(He,{tooltip:t.jsx(t.Fragment,{children:e.map((s,n)=>t.jsx("div",{children:s},n))}),children:e.length===1?"1 variant":`${e.length} variants`}),Fr=g(K)(({theme:e})=>({fontSize:e.fontSizes.smallBody,lineHeight:e.typography.body1.lineHeight})),Or=(e,s)=>{const{trackEvent:n}=ie(),{addChange:a}=pe(),{refetch:o}=ce(e),{setToastData:r,setToastApiError:i}=H(),{refetchFeature:l}=W(e,s),c=vt(e)(),{isChangeRequestConfiguredInAnyEnv:p}=te(e),{removeDependencies:u}=en(e),d=async()=>{if(!c){console.error("No change request environment");return}await a(e,c,[{action:"deleteDependency",feature:s,payload:void 0}])};return async()=>{try{p()?(await d(),n("dependent_features",{props:{eventType:"delete dependency added to change request"}}),r({type:"success",text:"Change added to draft"}),await o()):(await u(s),n("dependent_features",{props:{eventType:"dependency removed"}}),r({text:"Dependency removed",type:"success"}),await l())}catch(j){i(q(j))}}},_r=({feature:e})=>{var p,u,d,m,j,y,b;const[s,n]=x.useState(!1),a=!!e.project&&e.dependencies.length===0&&e.children.length===0,o=!!e.project&&e.dependencies.length>0,r=!!e.project&&e.children.length>0,i=vt(e.project)(),l=ws(e.project),c=Or(e.project,e.name);return t.jsxs(t.Fragment,{children:[a?t.jsxs(X,{children:[t.jsx(re,{children:"Dependency:"}),t.jsx("div",{children:t.jsx(Fr,{size:"small",permission:zt,projectId:e.project,variant:"text",onClick:()=>{n(!0)},children:"Add parent flag"})})]}):null,o?t.jsxs(X,{children:[t.jsx(re,{children:"Dependency:"}),t.jsxs(mt,{children:[t.jsx(Et,{to:`/projects/${e.project}/features/${(p=e.dependencies[0])==null?void 0:p.feature}`,children:t.jsx(Ue,{title:(u=e.dependencies[0])==null?void 0:u.feature,children:(d=e.dependencies[0])==null?void 0:d.feature})}),l(zt,i)?t.jsx(tn,{capabilityId:"dependency",feature:e.name,onEdit:()=>n(!0),onDelete:c}):null]})]}):null,o&&!((m=e.dependencies[0])!=null&&m.enabled)?t.jsxs(X,{children:[t.jsx(re,{children:"Dependency value:"}),t.jsx("span",{children:"disabled"})]}):null,o&&((y=(j=e.dependencies[0])==null?void 0:j.variants)!=null&&y.length)?t.jsxs(X,{children:[t.jsx(re,{children:"Dependency value:"}),t.jsx(Pr,{variants:((b=e.dependencies[0])==null?void 0:b.variants)||[]})]}):null,r?t.jsxs(X,{children:[t.jsx(re,{children:"Children:"}),t.jsx($r,{childFeatures:e.children,project:e.project})]}):null,e.project?t.jsx(Ar,{project:e.project,featureId:e.name,parentDependency:e.dependencies[0],onClose:()=>n(!1),showDependencyDialogue:s}):null]})},Br=(e,s={})=>{const n=Fe(`/api/admin/projects/${e}/dependencies`),{data:a,error:o}=ks(e,!1,n,zr,s);return{dependenciesExist:a,error:o,loading:!o&&!a}},zr=async e=>await(await fetch(e).then(Oe("Dependencies exist check"))).json(),Lr=e=>{const{dependenciesExist:s}=Br(e),{isOss:n}=fe();return!!e&&!!(!n()||s)},sn=(e,s={})=>{const n=async()=>{const p=Fe(`api/admin/features/${e}/tags`);return(await fetch(p,{method:"GET"}).then(Oe("Tags"))).json()},a=`api/admin/features/${e}/tags`,{data:o,error:r}=ks(!!e,{tags:[]},a,n,s),[i,l]=x.useState(!r&&!o),c=()=>{Rs(a)};return x.useEffect(()=>{l(!r&&!o)},[o,r]),{tags:(o==null?void 0:o.tags)||[],error:r,loading:i,refetch:c}},Mr=g("section")(({theme:e})=>({"& > *":{margin:e.spacing(1,0)}})),nt=e=>e.map(s=>({title:s.value})),Qt=(e,s)=>e.map(n=>({value:n.title,type:s})),nn=({open:e,setOpen:s})=>{const{tagTypes:n}=An(),a=A("featureId"),{createTag:o}=Yo(),{updateFeatureTags:r,loading:i}=Ge(),{tags:l,refetch:c,loading:p}=sn(a),{setToastData:u}=H(),d=n&&n.length>0?n[0]:{name:"simple",description:"Simple tag to get you started",icon:""},[m,j]=x.useState(d),y=i||p,[b,h]=x.useState(0),{trackEvent:f}=ie(),[w,E]=x.useState(nt(l.filter(v=>v.type===m.name))),{tags:O,refetch:_}=Jo(m.name),$=x.useMemo(()=>nt(O),[O]);x.useEffect(()=>{l&&m&&E(nt(l.filter(v=>v.type===m.name)))},[JSON.stringify(l),m,e]);const D=()=>{s(!1),E([])};function I(v,S){const F=v.filter(N=>N.type===m.name).filter(N=>!S.find(k=>N.value===k.value&&N.type===k.type)),V=S.filter(N=>N.type===m.name).filter(N=>!v.find(k=>N.value===k.value&&N.type===k.type));return h(F.length+V.length),{added:F,removed:V}}const R=v=>v.filter(S=>!S.title.startsWith("Create")),M=async(v,S)=>{try{await r(a,{addedTags:v,removedTags:S}),await c()}catch{u({type:"error",text:"Failed to add tag"})}},G=async v=>{v.preventDefault();const S=Qt(R(w),m.name),{added:F,removed:V}=I(S,l);b>0&&(await M(F,V),b>1&&f("suggest_tags",{props:{eventType:"multiple_tags_added"}}),b>0&&u({type:"success",text:`Updated tag${F.length>1?"s":""} to flag`})),h(0),E([]),s(!1)},Q=(v,S)=>{S!=null&&typeof S!="string"&&(v.preventDefault(),j(S),E([]),h(0))},C=(v,S,F)=>{const V=En(S);F==="selectOption"&&S.forEach((k,oe)=>{if(typeof k!="string"&&k.inputValue&&k.inputValue!==""){const ge={value:k.inputValue,type:m.name};o(ge).then(()=>{f("suggest_tags",{props:{eventType:"tag_created"}}),_()}),k.title=k.inputValue,k.inputValue="",V[oe]=k}});const N=Qt(R(V),m.name);I(N,l),E(V)},P="add-tag-form";return t.jsx(ue,{open:e,secondaryButtonText:"Cancel",primaryButtonText:"Save tags",title:"Update feature flag tags",onClick:G,disabledPrimaryButton:y||b===0,onClose:D,formId:P,children:t.jsxs(t.Fragment,{children:[t.jsx(z,{paragraph:!0,sx:{marginBottom:v=>v.spacing(2.5)},children:"Tags allow you to group features together"}),t.jsx("form",{id:P,onSubmit:G,children:t.jsxs(Mr,{children:[t.jsx(Ko,{options:n,value:m,onChange:Q}),t.jsx(Qo,{options:$,existingTags:l,tagType:m,selectedOptions:w,onChange:C})]})})]})})},Vr=g(K)(({theme:e})=>({lineHeight:e.typography.body1.lineHeight,borderRadius:e.shape.borderRadiusExtraLarge,background:e.palette.secondary.light,padding:e.spacing(.5,1),height:e.spacing(3.5)})),Nr=g(Ds)(({theme:e})=>({fontSize:e.typography.body2.fontSize})),Xt=({project:e,onClick:s})=>t.jsx(Vr,{size:"small",permission:Te,projectId:e,variant:"text",onClick:s,startIcon:t.jsx(Nr,{}),"data-loading":!0,children:"Add tag"}),Zt=g("span")(({theme:e})=>({marginTop:e.spacing(1),color:e.palette.text.secondary,marginRight:e.spacing(1)})),qr=g("div")(({theme:e})=>({display:"flex",justifyContent:"space-between",flexWrap:"wrap",minHeight:e.spacing(4.5),fontSize:e.fontSizes.smallBody})),es=g("div")(({theme:e})=>({display:"flex",overflow:"hidden",gap:e.spacing(1),flexWrap:"wrap",marginTop:e.spacing(.75)}));g(As)(({theme:e})=>({overflowWrap:"anywhere",lineHeight:e.typography.body1.lineHeight,backgroundColor:e.palette.neutral.light,color:e.palette.text.primary,padding:e.spacing(.25),height:e.spacing(3.5)}));g("span")(({theme:e})=>({color:e.palette.text.secondary}));const Wr=({feature:e})=>{const{tags:s,refetch:n}=sn(e.name),{deleteTagFromFeature:a}=Ge(),[o,r]=x.useState(!1),[i,l]=x.useState(!1),[c,p]=x.useState(),{setToastData:u,setToastApiError:d}=H(),{hasAccess:m}=x.useContext(Es),j=m(Te,e.project),y=()=>{r(!0)},b=async()=>{if(c)try{await a(e.name,c.type,c.value),n(),u({type:"success",text:"Tag removed"})}catch(h){d(q(h))}};return t.jsxs(t.Fragment,{children:[s.length?t.jsxs(qr,{children:[t.jsx(Zt,{children:"Tags:"}),t.jsxs(es,{children:[s.map(h=>t.jsx(Hr,{tag:h,canUpdateTags:j,onTagRemove:f=>{l(!0),p(f)}},Is(h))),j?t.jsx(Xt,{project:e.project,onClick:y}):null]})]}):t.jsxs(X,{children:[t.jsx(Zt,{children:"Tags:"}),t.jsx(es,{children:t.jsx(Xt,{project:e.project,onClick:y})})]}),t.jsx(nn,{open:o,setOpen:r}),t.jsxs(ue,{open:i,primaryButtonText:"Remove tag",secondaryButtonText:"Cancel",onClose:()=>{l(!1),p(void 0),n()},onClick:()=>{l(!1),b(),p(void 0)},title:"Remove tag",children:["You are about to remove tag:"," ",t.jsxs("strong",{children:[c==null?void 0:c.type,":",c==null?void 0:c.value]})]})]})},Hr=({tag:e,canUpdateTags:s,onTagRemove:n})=>{const a=Is(e),o=a.length>25,r=s?()=>n(e):void 0,i=t.jsx(ee,{title:"Remove tag",arrow:!0,children:t.jsx($n,{sx:{height:"20px",width:"20px"}})});return t.jsx(ee,{title:o?a:"",arrow:!0,children:t.jsx("span",{children:t.jsx(In,{tag:e,onDelete:r,deleteIcon:i})})},a)},Ur=g(Pn)(({theme:e})=>({width:e.spacing(2.5),height:e.spacing(2.5)})),Gr=g(Fn)({flexWrap:"nowrap"}),Yr=({collaborators:e})=>!e||e.length===0?null:t.jsx(Gr,{users:e,avatarLimit:9,AvatarComponent:Ur}),Jr="environment-visibility-button",ts="environment-visibility-menu",Kr=g("div")(({theme:e})=>({display:"flex",justifyContent:"center",paddingTop:e.spacing(4)})),Qr=({environments:e,hiddenEnvironments:s,onChange:n})=>{const[a,o]=x.useState(null),r=!!a,i=d=>{o(d.currentTarget)},l=()=>{o(null)},c=e.map(d=>d.name),p=new Set(c.filter(d=>!s.includes(d))),u=d=>{n(d)};return t.jsxs(Kr,{children:[t.jsx(ne,{onClick:i,endIcon:r?t.jsx(On,{}):t.jsx(_n,{}),variant:"outlined",id:Jr,"aria-controls":ts,"aria-haspopup":"true","aria-expanded":r?"true":void 0,"data-loading":!0,children:"Hide/show environments"}),t.jsx(Bn,{id:ts,open:!!a,anchorEl:a,onClose:l,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:t.jsx(zn,{multiselect:{selectedOptions:p},onChange:u,options:c.map(d=>({label:d,value:d})),search:{label:"Filter environments",placeholder:"Filter environments"}})})]})},an=(e,s)=>{const{makeRequest:n,createRequest:a,errors:o,loading:r}=Cs({propagateErrors:!0}),i=async u=>{const d=a(`/api/admin/projects/${e}/features/${s}/link`,{method:"POST",body:JSON.stringify(u)});await n(d.caller,d.id)},l=async(u,d)=>{const m=a(`/api/admin/projects/${e}/features/${s}/link/${u}`,{method:"PUT",body:JSON.stringify(d)});await n(m.caller,m.id)},c=async u=>{const d=a(`/api/admin/projects/${e}/features/${s}/link/${u}`,{method:"DELETE"});await n(d.caller,d.id)},p=[a,n,q,e];return{addLink:x.useCallback(i,p),editLink:x.useCallback(l,p),deleteLink:x.useCallback(c,p),errors:o,loading:r}},ss=g(vs)(({theme:e})=>({width:"100%",marginTop:e.spacing(1),marginBottom:e.spacing(1)})),on=({showDialogue:e,onClose:s,project:n,featureId:a,mode:o,link:r})=>{const[i,l]=x.useState(""),[c,p]=x.useState(""),[u,d]=x.useState(""),{addLink:m,editLink:j,loading:y}=an(n,a),{refetchFeature:b}=W(n,a),{setToastData:h,setToastApiError:f}=H(),w=o==="edit",E=w?"Edit link":"Add link",O=w?"Link updated":"Link added",{trackEvent:_}=ie();x.useEffect(()=>{w&&r?(l(r.url||""),p(r.title||""),d(r.id||"")):w||(l(""),p(""),d(""))},[w,r]);const $=async()=>{try{w?(await j(u,{url:i,title:c||null}),_("feature-links",{props:{eventType:"edit-link"}})):(await m({url:i,title:c||null}),_("feature-links",{props:{eventType:"add-link"}})),h({text:O,type:"success"}),s(),b(),p(""),l("")}catch(I){f(q(I))}},D=w?r!==null:e;return t.jsx(ue,{open:D,title:E,onClose:s,disabledPrimaryButton:i.trim()===""||y,onClick:$,primaryButtonText:"Save",secondaryButtonText:"Cancel",children:t.jsxs(B,{children:[t.jsx(ss,{label:"Link",variant:"outlined",value:i,onChange:I=>l(I.target.value)}),t.jsx(ss,{label:"Title (optional)",variant:"outlined",value:c,onChange:I=>p(I.target.value)})]})})},Xr=e=>t.jsx(on,{...e,mode:"add",link:null}),Zr=e=>t.jsx(on,{...e,mode:"edit",showDialogue:e.link!==null}),rn=g("div")(({theme:e})=>({padding:e.spacing(3),borderRadius:e.shape.borderRadiusLarge,backgroundColor:e.palette.background.paper,display:"flex",flexDirection:"column",gap:e.spacing(2),width:"350px",border:`1px solid ${e.palette.divider}`,[e.breakpoints.down("md")]:{width:"100%"},marginBottom:e.spacing(2)})),yt=g("h2")(({theme:e})=>({fontSize:e.typography.body1.fontSize,fontWeight:e.typography.fontWeightBold,marginBottom:e.spacing(.5)})),ei=g("div")({display:"flex",flexDirection:"column"}),X=g("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:e.spacing(4.5),fontSize:e.fontSizes.smallBody})),re=g("span")(({theme:e})=>({color:e.palette.text.secondary,marginRight:e.spacing(1)})),Be=g("span")({overflowWrap:"anywhere"}),mt=g("div")(({theme:e})=>({display:"flex",alignItems:"center",gap:e.spacing(1)})),ti=g(De)(({theme:e})=>({minWidth:e.spacing(5)})),si=({links:e,project:s,feature:n})=>{const[a,o]=x.useState(!1),[r,i]=x.useState(null),{deleteLink:l,loading:c}=an(s,n),{setToastData:p,setToastApiError:u}=H(),{refetchFeature:d}=W(s,n),m=t.jsx(K,{size:"small",startIcon:t.jsx(Ds,{}),permission:Te,disabled:e.length>=10,projectId:s,variant:"text",onClick:()=>o(!0),children:"Add link"}),j=()=>t.jsx(Tt,{children:e.map(h=>t.jsx(Me,{secondaryAction:t.jsx(tn,{capabilityId:"link",feature:n,onEdit:()=>{i(h)},onDelete:async()=>{try{await l(h.id),p({text:"Link removed",type:"success"}),d()}catch(f){u(q(f))}}}),disablePadding:!0,dense:!0,children:t.jsxs(Nn,{component:"a",href:h.url,target:"_blank",rel:"noopener noreferrer",disableGutters:!0,children:[t.jsx(ti,{children:t.jsx(qn,{color:"primary"})}),t.jsx(Ce,{primary:h.title,secondary:h.url,secondaryTypographyProps:{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",display:"block"}}})]})},h.id))}),y=t.jsxs(t.Fragment,{children:[t.jsxs(yt,{children:["You can now add links"," ",t.jsx(Ae,{color:"success",sx:{ml:1},children:"New"})]}),t.jsx(X,{children:"Gather relevant links for external resources such as issue trackers, code repositories or analytics tooling"}),t.jsx("div",{children:m})]}),b=t.jsxs(t.Fragment,{children:[t.jsx(yt,{children:"Resources"}),j(),t.jsx("div",{children:m})]});return t.jsxs(t.Fragment,{children:[t.jsx(rn,{children:e.length===0?y:b}),t.jsx(Xr,{project:s,featureId:n,showDialogue:a,onClose:()=>o(!1)}),t.jsx(Zr,{project:s,featureId:n,link:r,onClose:()=>i(null)})]})},ni=({hiddenEnvironments:e,onEnvironmentVisibilityChange:s,feature:n,onChange:a})=>{var y,b,h,f;const{locationSettings:o}=$s(),r=le(),[i,l]=x.useState(!1),[c,p]=x.useState(!1),{project:u,description:d,type:m}=n,j=Lr(u);return t.jsxs(t.Fragment,{children:[t.jsx(si,{links:n.links||[],project:n.project,feature:n.name}),t.jsxs(rn,{children:[t.jsxs("div",{children:[t.jsx(yt,{children:"Flag details"}),d?t.jsx(X,{"data-loading":!0,children:t.jsx(Be,{children:t.jsx(Ue,{arrow:!0,lines:5,title:d,children:d})})}):null]}),t.jsxs(ei,{children:[t.jsxs(X,{children:[t.jsx(re,{children:"Flag type:"}),t.jsxs(Be,{"data-loading":!0,children:[Ln(m||" ")," flag"]})]}),n.lifecycle?t.jsxs(X,{"data-loading":!0,children:[t.jsx(re,{children:"Lifecycle:"}),t.jsx(Mn,{feature:n,onArchive:()=>l(!0),onComplete:()=>p(!0),onUncomplete:a})]}):null,t.jsxs(X,{children:[t.jsx(re,{children:"Created:"}),t.jsx(Be,{"data-loading":!0,children:Vn(Ct(n.createdAt),o.locale)})]}),n.createdBy?t.jsxs(X,{children:[t.jsx(re,{children:"Created by:"}),t.jsx(mt,{children:t.jsx(Be,{"data-loading":!0,children:(y=n.createdBy)==null?void 0:y.name})})]}):null,(b=n.collaborators)!=null&&b.users&&((h=n.collaborators)==null?void 0:h.users.length)>0?t.jsxs(X,{children:[t.jsx(re,{children:"Collaborators:"}),t.jsx(mt,{children:t.jsx(Yr,{collaborators:(f=n.collaborators)==null?void 0:f.users})})]}):null,j?t.jsx(_r,{feature:n}):null,t.jsx(Wr,{feature:n}),s?t.jsx(Qr,{environments:n.environments||[],hiddenEnvironments:e||[],onChange:s}):null]})]}),n.children.length>0?t.jsx(At,{features:n.children,project:n.project,isOpen:i,onClose:()=>l(!1)}):t.jsx(Dt,{isOpen:i,onConfirm:()=>{r(`/projects/${n.project}`)},onClose:()=>l(!1),projectId:n.project,featureIds:[n.name]}),n.project?t.jsx(Ks,{isOpen:c,setIsOpen:p,projectId:n.project,featureId:n.name,onComplete:a}):null]})},ai=e=>{var o;const{uiConfig:s}=fe(),n=((o=s.resourceLimits)==null?void 0:o.featureEnvironmentStrategies)||100,a=e>=n;return{limit:n,limitReached:a}},oi=()=>{const[e,s]=x.useState(0),n=A("projectId"),a=A("featureId"),o=Lt("environmentId"),r=Lt("strategyName"),{strategy:i,defaultStrategyFallback:l}=Xo(n,o),c=JSON.parse(Wn().get("defaultStrategy")||"false"),{segments:p}=Hn(),u=(p||[]).filter(Y=>{var je;return(je=i==null?void 0:i.segments)==null?void 0:je.includes(Y.id)}),[d,m]=x.useState({}),[j,y]=x.useState(c?u:[]),{strategyDefinition:b}=Un(r),h=Gn(),{addStrategyToFeature:f,loading:w}=_e(),{addChange:E}=pe(),{setToastData:O,setToastApiError:_}=H(),{uiConfig:$}=fe(),{unleashUrl:D}=$,I=le(),{feature:R,refetchFeature:M}=W(n,a),G=R==null?void 0:R.environments.find(Y=>Y.name===o),Q=(G==null?void 0:G.strategies.length)||0,{limit:C,limitReached:P}=ai(Q),v=x.useRef(R),{isChangeRequestConfigured:S}=te(n),{refetch:F}=ce(n),{trackEvent:V}=ie(),{data:N,staleDataNotification:k,forceRefreshCache:oe}=Yn({unleashGetter:W,params:[n,a],dataKey:"feature",refetchFunctionKey:"refetchFeature",options:{}},R,{afterSubmitAction:M},aa);x.useEffect(()=>{v.current.name===""&&R.name&&(oe(R),v.current=R)},[R.name]),x.useEffect(()=>{var Y;if(c){const je=i||l;((Y=je.parameters)==null?void 0:Y.groupId)===""&&a?m({...je,parameters:{...je.parameters,groupId:a}}):m(je)}else b&&m(Jn(a,b))},[a,JSON.stringify(b),JSON.stringify(i),c]);const ge=async Y=>{await f(n,a,o,Y),O({text:"Strategy created",type:"success"})},ye=async Y=>{await E(n,o,{action:"addStrategy",feature:a,payload:Y}),O({text:"Strategy added to draft",type:"success"}),F()},T=Kn(d,j),U=async()=>{V("strategyTitle",{props:{hasTitle:!!d.title,on:"create"}});try{S(o)?await ye(T):await ge(T),M(),I(wt(n,a))}catch(Y){_(q(Y))}};return!N||!N.project?null:t.jsxs(Ps,{modal:!0,description:Qn,documentationLink:Xn,documentationLinkLabel:Zn,disablePadding:!0,formatApiCode:()=>ri(n,a,o,T,D),children:[t.jsx(ea,{projectId:n,feature:N,strategy:d,setStrategy:m,segments:j,setSegments:y,environmentId:o,onSubmit:U,loading:w,permission:ve,errors:h,isChangeRequest:S(o),tab:e,setTab:s,StrategyVariants:t.jsx(ta,{strategy:d,setStrategy:m,environment:o,projectId:n,editable:!0}),Limit:t.jsx(sa,{name:"strategies in this environment",shortName:"strategies",currentValue:Q,limit:C}),disabled:P}),k]})},cn=(e,s,n,a,o=!1)=>{const r=new URLSearchParams({environmentId:n,strategyName:a,defaultStrategy:String(o)});return`/projects/${e}/features/${s}/strategies/create?${r}`},ri=(e,s,n,a,o)=>{if(!o)return"";const r=`${o}/api/admin/projects/${e}/features/${s}/environments/${n}/strategies`,i=JSON.stringify(a,na,2);return`curl --location --request POST '${r}' \\
    --header 'Authorization: INSERT_API_KEY' \\
    --header 'Content-Type: application/json' \\
    --data-raw '${i}'`},ns=3,ln=e=>Array.isArray(e)?e.filter(s=>s.featureId&&s.projectId):[],as=e=>ln(ia(e)||[]),ii=()=>{const e=`${ca}:unleash-lastViewedFlags`,[s,n]=x.useState(()=>as(e)),{emitEvent:a}=oa("lastViewedFlagsUpdated",x.useCallback(()=>{n(as(e))},[e]));x.useEffect(()=>{s&&(ra(e,s),a())},[JSON.stringify(s),e,a]);const o=x.useCallback(r=>{if(!r.featureId||!r.projectId||s.find(l=>l.featureId===r.featureId))return;const i=ln([...s,r]);n(i.length>ns?i.slice(-ns):i)},[JSON.stringify(s)]);return{lastViewed:s,setLastViewed:o}},ci=g("div")(({theme:e})=>({width:e.spacing(3),"& > svg":{width:e.spacing(2.25),height:e.spacing(2.25),fill:e.palette.primary.main}})),li=g(Fs)(({theme:e})=>({fontWeight:e.typography.fontWeightBold,fontSize:e.typography.caption.fontSize,display:"block",marginBottom:e.spacing(.5)})),di=g(ae)(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",maxWidth:"30rem",padding:e.spacing(1.5,2),color:"inherit",textDecoration:"inherit",lineHeight:1.25,borderWidth:"1px",borderStyle:"solid",borderColor:e.palette.divider,borderRadius:e.spacing(1),overflow:"hidden","&:hover, &:focus":{borderColor:e.palette.primary.main}})),ui=g("div")(({theme:e})=>({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"})),at=({projectId:e,featureId:s,environmentId:n,strategy:a,defaultStrategy:o,onClose:r})=>{const i=Os(a.name),l=_s(a.name),{trackEvent:c}=ie(),p=cn(e,s,n,a.name,o),u=()=>{c("strategy-add",{props:{buttonTitle:a.displayName||l}}),r()};return t.jsxs(di,{to:p,onClick:u,children:[t.jsxs(ui,{children:[t.jsx(ci,{children:t.jsx(i,{})}),t.jsx(li,{text:a.displayName||l,maxWidth:"200",maxLength:25})]}),t.jsx(Ue,{lines:1,title:a.description,arrow:!0,sx:{fontSize:d=>d.typography.caption.fontSize,width:"100%"},children:a.description})]})},pi=g("div")(({theme:e})=>({width:e.spacing(3),"& > svg":{width:e.spacing(2.25),height:e.spacing(2.25),fill:e.palette.primary.main}})),gi=g(Fs)(({theme:e})=>({fontWeight:e.typography.fontWeightBold,fontSize:e.typography.caption.fontSize,display:"block",marginBottom:e.spacing(.5)})),hi=g("div")(({theme:e})=>({width:"100%",transition:"opacity 0.2s ease-in-out"})),xi=g("div")(({theme:e})=>({position:"absolute",right:e.spacing(2),display:"flex",gap:e.spacing(1),opacity:0,transition:"opacity 0.1s ease-in-out"})),fi=g("div")(({theme:e})=>({display:"flex",flexDirection:"column",width:"100%",height:"100%",maxWidth:"30rem",padding:e.spacing(1.5,2),color:"inherit",textDecoration:"inherit",lineHeight:1.25,borderWidth:"1px",borderStyle:"solid",borderColor:e.palette.divider,borderRadius:e.spacing(1),textAlign:"left",overflow:"hidden",position:"relative","&:hover .cardContent, &:focus-within .cardContent":{opacity:.5},"&:hover .buttonContainer, &:focus-within .buttonContainer":{opacity:1}})),yi=g("div")(({theme:e})=>({display:"flex",flexDirection:"row",alignItems:"center",width:"100%"})),mi=({template:{name:e,description:s},onClick:n,onPreviewClick:a})=>{const o=Os("releasePlanTemplate"),r=l=>{l.stopPropagation(),n()},i=l=>{l.stopPropagation(),a(l)};return t.jsxs(fi,{children:[t.jsxs(hi,{className:"cardContent",children:[t.jsxs(yi,{children:[t.jsx(pi,{children:t.jsx(o,{})}),t.jsx(gi,{text:e,maxWidth:"200",maxLength:25})]}),t.jsx(Ue,{lines:1,title:s,arrow:!0,sx:{fontSize:l=>l.typography.caption.fontSize,fontWeight:l=>l.typography.fontWeightRegular,width:"100%"},children:s})]}),t.jsxs(xi,{className:"buttonContainer",children:[t.jsx(ne,{variant:"contained",size:"small",onClick:r,tabIndex:0,children:"Use"}),t.jsx(ne,{variant:"outlined",size:"small",onClick:i,children:"Preview"})]})]})},ji=g(B)(()=>({width:"100%",display:"flex",flexDirection:"column"})),bi=g(B)(({theme:e})=>({width:"100%",maxHeight:"70vh",overflowY:"auto",padding:e.spacing(4),paddingTop:0,display:"flex",flexDirection:"column",gap:e.spacing(3)})),ot=g(B)(({theme:e})=>({display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:e.spacing(1.5),width:"100%"})),ze=g(B)(()=>({width:"100%",minWidth:0})),vi=g(B)(({theme:e})=>({display:"flex",justifyContent:"space-between",alignItems:"center",padding:e.spacing(4,4,2,4)})),Si=g(z)(({theme:e})=>({fontSize:e.typography.body1.fontSize,fontWeight:e.typography.fontWeightBold,margin:0})),rt=g(B)(({theme:e})=>({display:"flex",alignItems:"center",gap:e.spacing(.5),marginBottom:e.spacing(1),width:"100%"})),it=g(la)(({theme:e})=>({fontSize:e.typography.body2.fontSize,color:e.palette.text.secondary})),Ci=g("span")(({theme:e})=>({width:e.spacing(3),"& > svg":{fill:e.palette.primary.main,width:e.spacing(2.25),height:e.spacing(2.25)},display:"flex",alignItems:"center"})),Ti=g(B)(({theme:e})=>({display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-start",backgroundColor:e.palette.neutral.light,borderRadius:e.shape.borderRadiusMedium,padding:e.spacing(3),width:"auto"})),wi=g(z)(({theme:e})=>({fontSize:e.typography.caption.fontSize,fontWeight:e.typography.fontWeightBold,marginBottom:e.spacing(1),display:"flex",alignItems:"center"})),ki=g(z)(({theme:e})=>({fontSize:e.typography.caption.fontSize,color:e.palette.text.secondary})),Ri=g(Ye)(({theme:e})=>({fontWeight:e.typography.fontWeightBold,cursor:"pointer","&:hover":{textDecoration:"underline"}})),Di=({projectId:e,featureId:s,environmentId:n,onlyReleasePlans:a,onAddReleasePlan:o,onReviewReleasePlan:r,onClose:i})=>{const{isEnterprise:l}=fe(),c=Je("releasePlans"),{strategies:p}=da(),{templates:u}=ua(),d=le(),m=p.filter(h=>!h.deprecated&&!h.editable),j=p.filter(h=>!h.deprecated&&h.editable),y={name:"flexibleRollout",displayName:"Default strategy",description:"This is the default strategy defined for this environment in the project"},b=()=>!l()||!c?null:u.length?t.jsxs(B,{children:[t.jsxs(rt,{children:[t.jsx(z,{color:"inherit",variant:"body2",children:"Apply a release template"}),t.jsx(ee,{title:"Use a predefined template to roll out features to users",arrow:!0,children:t.jsx(it,{})})]}),t.jsx(ot,{children:u.map(h=>t.jsx(ze,{children:t.jsx(mi,{template:h,onClick:()=>o(h),onPreviewClick:()=>r(h)})},h.id))})]}):t.jsxs(Ti,{children:[t.jsxs(wi,{children:[t.jsx(Ci,{children:t.jsx(pa,{})}),"Create your own release templates"]}),t.jsxs(ki,{children:["Standardize your rollouts and save time by reusing predefined strategies. Find release templates in the side menu under"," ",t.jsx(Ri,{onClick:()=>d("/release-templates"),children:"Configure > Release templates"})]})]});return t.jsxs(ji,{children:[t.jsxs(vi,{children:[t.jsx(Si,{variant:"h2",children:a?"Select template":"Select strategy"}),t.jsx(xe,{size:"small",onClick:i,edge:"end","aria-label":"close",children:t.jsx(kt,{fontSize:"small"})})]}),t.jsx(bi,{children:a?b():t.jsxs(t.Fragment,{children:[t.jsxs(B,{children:[t.jsxs(rt,{children:[t.jsx(z,{color:"inherit",variant:"body2",children:"Pre-defined strategy types"}),t.jsx(ee,{title:"Select a starting setup, and customize the strategy to your need with targeting and variants",arrow:!0,children:t.jsx(it,{})})]}),t.jsxs(ot,{children:[t.jsx(ze,{children:t.jsx(at,{projectId:e,featureId:s,environmentId:n,strategy:y,defaultStrategy:!0,onClose:i})},y.name),m.map(h=>t.jsx(ze,{children:t.jsx(at,{projectId:e,featureId:s,environmentId:n,strategy:h,onClose:i})},h.name))]})]}),b(),j.length>0&&t.jsxs(B,{children:[t.jsxs(rt,{children:[t.jsx(z,{color:"inherit",variant:"body2",children:"Custom strategies"}),t.jsx(ee,{title:"Custom strategies you have defined in Unleash",arrow:!0,children:t.jsx(it,{})})]}),t.jsx(ot,{children:j.map(h=>t.jsx(ze,{children:t.jsx(at,{projectId:e,featureId:s,environmentId:n,strategy:h,onClose:i})},h.name))})]})]})})]})},Ai=g(Bs)(({theme:e})=>({"& .MuiDialog-paper":{borderRadius:e.shape.borderRadiusLarge,maxWidth:e.spacing(85)}})),Ei=g(ga)(({theme:e})=>({padding:e.spacing(2,4,4)})),Ii=g(B)(({theme:e})=>({display:"flex",justifyContent:"space-between",marginBottom:e.spacing(2)})),$i=g(B)(({theme:e})=>({display:"flex",alignItems:"center",cursor:"pointer"})),Pi=g(ha)(({theme:e})=>({marginRight:e.spacing(1),color:e.palette.primary.main,display:"flex",alignSelf:"center"})),Fi=g(z)(({theme:e})=>({fontWeight:e.typography.fontWeightMedium,display:"flex",alignItems:"center",lineHeight:1})),Oi=({open:e,setOpen:s,onConfirm:n,template:a,projectId:o,featureName:r,environment:i,crProtected:l})=>{const{feature:c}=W(o,r),{releasePlans:p}=Ke(o,r,i),u=p[0],d=c==null?void 0:c.environments.find(({name:b})=>b===i),m=d==null?void 0:d.enabled,j=xa(a.id,r,i),y=()=>s(!1);return t.jsxs(Ai,{open:e,onClose:y,fullWidth:!0,maxWidth:"md",children:[t.jsxs(fa,{children:[t.jsxs(Ii,{children:[t.jsxs($i,{onClick:y,children:[t.jsx(Pi,{}),t.jsx(Fi,{variant:"body2",color:"primary",children:"Go back"})]}),t.jsx(xe,{size:"small",onClick:y,edge:"end","aria-label":"close",children:t.jsx(kt,{fontSize:"small"})})]}),u&&t.jsxs(Z,{severity:"error",sx:{mb:1},children:["This feature environment currently has"," ",t.jsx("strong",{children:u.name})," -"," ",t.jsx("strong",{children:u.milestones[0].name}),m?" running":" paused",". Adding a new release plan will replace the existing release plan."]}),t.jsx("div",{children:t.jsx(zs,{plan:j,readonly:!0})}),l&&t.jsxs(z,{sx:{mt:4},children:[t.jsx("strong",{children:"Adding"})," release template"," ",t.jsx("strong",{children:a==null?void 0:a.name})," to"," ",t.jsx("strong",{children:r})," in"," ",t.jsx("strong",{children:i}),"."]})]}),t.jsx(Ei,{children:t.jsx(ne,{variant:"contained",color:"primary",onClick:n,children:l?"Add suggestion to draft":"Use template"})})]})},_i=g("div")(({theme:e})=>({display:"flex",flexFlow:"row",justifyContent:"flex-end",gap:e.spacing(1)})),Bi=g(K)(({theme:e})=>({minWidth:0,width:e.spacing(4.5),alignSelf:"stretch",paddingBlock:0})),os=({label:e,projectId:s,featureId:n,environmentId:a,variant:o,size:r,matchWidth:i,disableReason:l})=>{const[c,p]=x.useState(!1),[u,d]=x.useState(!1),m=le(),{trackEvent:j}=ie(),[y,b]=x.useState(),[h,f]=x.useState(!1),w=c?"FeatureStrategyMenuDialog":void 0,{setToastApiError:E,setToastData:O}=H(),{isChangeRequestConfigured:_}=te(s),{addChange:$}=pe(),{refetch:D}=ce(s),{refetch:I}=Ke(s,n,a),{addReleasePlanToFeature:R}=ya(),{isOss:M}=fe(),G=Je("releasePlans"),Q=!M()&&G,C=G&&_(a),P=()=>{p(!1)},v=k=>{j("strategy-add",{props:{buttonTitle:e}}),m(N)},S=k=>{d(!1),p(!0)},F=k=>{d(!0),p(!0)},V=async k=>{try{C?(await $(s,a,{feature:n,action:"addReleasePlan",payload:{templateId:k.id}}),O({type:"success",text:"Added to draft"}),D()):(await R(n,k.id,s,a),O({type:"success",text:"Release plan added"}),I()),j("release-management",{props:{eventType:"add-plan",plan:k.name}})}catch(oe){E(q(oe))}finally{f(!1),b(void 0),P()}},N=cn(s,n,a,"flexibleRollout",!0);return t.jsxs(_i,{onClick:k=>k.stopPropagation(),children:[Q?t.jsx(K,{"data-testid":"ADD_TEMPLATE_BUTTON",permission:ve,projectId:s,environmentId:a,onClick:F,"aria-labelledby":w,variant:"outlined",sx:{minWidth:i?"282px":"auto"},disabled:!!l,tooltipProps:{title:l||void 0},children:"Use template"}):null,t.jsx(K,{"data-testid":"ADD_STRATEGY_BUTTON",permission:ve,projectId:s,environmentId:a,onClick:v,"aria-labelledby":w,variant:o,sx:{minWidth:i?"282px":"auto"},disabled:!!l,tooltipProps:{title:l||void 0},children:e}),t.jsx(Bi,{permission:ve,projectId:s,environmentId:a,onClick:S,variant:"outlined",hideLockIcon:!0,disabled:!!l,tooltipProps:{title:l||"More strategies"},children:t.jsx(St,{})}),t.jsx(Bs,{open:c,onClose:P,maxWidth:"md",PaperProps:{sx:{borderRadius:"12px"}},children:t.jsx(Di,{projectId:s,featureId:n,environmentId:a,onlyReleasePlans:u,onAddReleasePlan:k=>{b(k),V(k)},onReviewReleasePlan:k=>{b(k),f(!0),P()},onClose:P})}),y&&t.jsx(Oi,{open:h,setOpen:k=>{f(k),k||p(!0)},onConfirm:()=>{V(y)},template:y,projectId:s,featureName:n,environment:a,crProtected:C})]})},dn=(e,s)=>e===0?0:Math.round(s/e*100),zi=g("div")(()=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative",margin:0})),Li=g("div",{shouldForwardProp:e=>e!=="color"})(({theme:e,color:s})=>({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:s,fontSize:e.fontSizes.smallerBody,margin:0})),Mi=({percentage:e,size:s="4rem",disabled:n=!1,children:a})=>{const o=Pe(),r={display:"block",borderRadius:"100%",transform:"rotate(-90deg)",height:s,width:s},i=100/(2*Math.PI),l=2*i,c=l*.2,p=n?o.palette.neutral.border:o.palette.primary.light;return t.jsxs(zi,{children:[t.jsxs("svg",{viewBox:`0 0 ${l} ${l}`,style:r,"aria-hidden":!0,children:[t.jsx("circle",{r:i,cx:i,cy:i,fill:"none",stroke:o.palette.background.elevation2,strokeWidth:c}),t.jsx("circle",{r:i,cx:i,cy:i,fill:"none",stroke:p,strokeWidth:c,strokeDasharray:`${e} 100`})]}),t.jsx(Li,{color:p,children:a})]})},Vi=g("figure")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"flex-end",margin:0,padding:0})),Ni=g("figcaption")(({theme:e})=>({fontSize:e.typography.body2.fontSize,textAlign:"right",[e.breakpoints.down("xl")]:{display:"none"},display:"flex",flexDirection:"column",flexGrow:1,margin:0,padding:0,span:{textWrap:"nowrap"}})),qi=g("div")(({theme:e})=>({marginRight:e.spacing(1),marginLeft:e.spacing(1.5),[e.breakpoints.down(500)]:{display:"none"}})),Wi=g(({className:e,...s})=>t.jsx(ee,{...s,classes:{popper:e}}))({[`& .${ma.tooltip}`]:{maxWidth:200}}),Hi=({environmentMetric:e,collapsed:s})=>{if(!e)return null;const n=e.yes+e.no,a=dn(n,e==null?void 0:e.yes),o=!e||e.yes===0&&e.no===0,r=o?t.jsxs(t.Fragment,{children:["No evaluation metrics",t.jsx("br",{}),"received in the last hour"]}):t.jsxs(t.Fragment,{children:[t.jsxs("span",{children:["The flag has been evaluated"," ",t.jsxs("b",{children:[t.jsx(Ve,{value:n})," times"]})]})," ",t.jsxs("span",{children:["and enabled"," ",t.jsxs("b",{children:[t.jsx(Ve,{value:e.yes})," times"]})," ","in the last hour"]})]});return t.jsxs(Vi,{children:[s?null:t.jsx(Ni,{children:r}),t.jsx(Wi,{title:s?r:"",arrow:!0,children:t.jsx(qi,{"data-loading":!0,children:t.jsx(Mi,{percentage:a,size:"3rem",children:o?null:`${a}%`})})})]})},Ui=g("div")(({theme:e})=>({order:-1,flex:0})),Gi=({environment:{name:e,type:s,strategies:n,enabled:a}})=>{const o=A("projectId"),r=A("featureId"),{refetchFeature:i}=W(o,r),{isChangeRequestConfigured:l}=te(o),{onToggle:c,modals:p}=Zo(o),u=(d,m)=>c(d,{projectId:o,featureId:r,environmentName:e,environmentType:s,hasStrategies:n.length>0,hasEnabledStrategies:n.some(j=>!j.disabled),isChangeRequestEnabled:l(e),onRollback:m,onSuccess:i});return t.jsxs(Ui,{onClick:d=>d.stopPropagation(),children:[t.jsx(er,{projectId:o,value:a,featureId:r,environmentName:e,onToggle:u}),p]})},Yi=(e,s)=>{const n=[];let a=0;if(e.length<=a)return e;for(;a<e.length;)if(a===0){a+=s;const o=e.slice(0,a);n.push(o)}else{const o=e.slice(a,a+s);a+=s,n.push(o)}return n},Ji=(e,s,n)=>{const[a,o]=x.useState([[]]),[r,i]=x.useState(0);x.useEffect(()=>{const m=Yi(e,s);o(m)},[JSON.stringify(e),s]);const l=()=>{r<a.length-1&&i(d=>d+1)},c=()=>{r>0&&i(d=>d-1)},p=()=>{i(a.length-1)},u=()=>{i(0)};return{page:a[r]||[],pages:a,nextPage:l,prevPage:c,lastPage:p,firstPage:u,setPageIndex:i,pageIndex:r}},Ki=e=>fetch(e).then(Oe("ChangeRequest")).then(s=>s.json()),un=(e,s)=>{const{data:n,error:a,mutate:o}=Ls([],Fe(`api/admin/projects/${e}/change-requests/pending/${s}`),Ki);return{changeRequests:n,loading:!a&&!n,refetch:o,error:a}},Qi=(e,s,n,a)=>{const{user:o}=ja(),{changeRequests:r}=un(e,s),i=[],l=r==null?void 0:r.filter(c=>c.environment===n);return l==null||l.forEach(c=>{const p=c==null?void 0:c.features.find(d=>d.name===s),u=p==null?void 0:p.changes.find(d=>d.action==="updateStrategy"||d.action==="deleteStrategy"?d.payload.id===a:!1);if(u){const d=c.state==="Scheduled",m=!d&&c.createdBy.id===(o==null?void 0:o.id);d&&i.push({changeRequestId:c.id,change:u,isScheduledChange:d}),m&&i.push({changeRequestId:c.id,change:u,isScheduledChange:d})}}),i},pn=({scheduledChangeRequestIds:e})=>{const s=Pe(),n=Qe(s.breakpoints.down("sm")),a=A("projectId");return n?null:t.jsx(B,{sx:{mr:1.5},children:t.jsx(He,{tooltip:t.jsx(t.Fragment,{children:e==null?void 0:e.map((o,r)=>t.jsxs(Et,{to:`/projects/${a}/change-requests/${o}`,children:["Change request #",o]},`${a}-${r}`))}),children:t.jsx(Ae,{color:"warning",children:"Changes Scheduled"})})})},Xi=({changeAction:e,sx:s})=>{switch(e){case"updateStrategy":return t.jsx(Ae,{color:"warning",sx:s,children:"Modified in draft"});case"deleteStrategy":return t.jsx(Ae,{color:"error",sx:s,children:"Deleted in draft"});default:return null}},Zi=e=>(s,n,a)=>(a.revalidateOnFocus=!1,a.revalidateIfStale=!1,a.revalidateOnReconnect=!1,e(s,n,a)),ec=ba(Ms,Zi),tc=(e,s)=>{const{refetchFeature:n}=W(e,s),a=va(e,s),{data:o,error:r,mutate:i}=ec(["useFeatureImmutable",a],()=>Sa(a)),l=x.useCallback(async()=>{await i(),await n()},[i,n]);return{feature:(o==null?void 0:o.body)||Ca,refetchFeature:l,loading:!r&&!o,status:o==null?void 0:o.status,error:r}},sc=(e,s,n)=>{const{setToastData:a,setToastApiError:o}=H(),{addChange:r}=pe(),{refetch:i}=ce(e),[l,c]=x.useState({isOpen:!1}),p=x.useCallback((y,b,h)=>{c({featureName:s,environment:y,fromEnvironment:h,strategy:b,isOpen:!0})},[]),u=x.useCallback((y,b,h)=>{c({featureName:s,environment:y,fromEnvironment:h,strategies:b,isOpen:!0})},[]),d=x.useCallback(()=>{c({isOpen:!1})},[]),m=x.useCallback(async()=>{try{await r(e,l.environment,{feature:l.featureName,action:n,payload:l.strategy}),i(),c({isOpen:!1}),a({type:"success",text:"Changes added to draft"})}catch(y){o(q(y)),c({isOpen:!1})}},[r]),j=x.useCallback(async()=>{try{await Promise.all(l.strategies.map(y=>r(e,l.environment,{feature:l.featureName,action:n,payload:y}))),i(),c({isOpen:!1}),a({type:"success",text:"Changes added to draft"})}catch(y){o(q(y)),c({isOpen:!1})}},[r]);return{onChangeRequestAddStrategy:p,onChangeRequestAddStrategies:u,onChangeRequestAddStrategyClose:d,onChangeRequestAddStrategyConfirm:m,onChangeRequestAddStrategiesConfirm:j,changeRequestDialogDetails:l}},nc=({payload:e,fromEnvironment:s,environment:n})=>t.jsxs(z,{children:[t.jsxs("strong",{children:["Copy ",_s((e==null?void 0:e.name)||"")," strategy"," "]})," ","from ",s," to ",n]}),ac=({environmentId:e,environments:s,strategy:n})=>{const a=A("projectId"),o=A("featureId"),[r,i]=x.useState(null),l=!!r,{addStrategyToFeature:c}=_e(),{setToastData:p,setToastApiError:u}=H(),{refetchFeature:d}=W(a,o),{refetchFeature:m}=tc(a,o),j=()=>{i(null)},y=ws(a),{isChangeRequestConfigured:b}=te(a),{changeRequestDialogDetails:h,onChangeRequestAddStrategyClose:f,onChangeRequestAddStrategy:w,onChangeRequestAddStrategyConfirm:E}=sc(a,o,"addStrategy"),O=async D=>{const{id:I,...R}={...n,targetEnvironment:D};if(b(D)){await w(D,R,e);return}try{await c(a,o,D,n),d(),m(),p({text:`Strategy copied to ${D}`,type:"success"})}catch(M){u(q(M))}j()},_=[...s,e].some(D=>y(ve,D)),$=`Copy to environment${_?"":` (Access denied, missing ${ve} permission)`}`;return t.jsxs("div",{children:[t.jsx(tr,{isOpen:h.isOpen,onClose:f,environment:h==null?void 0:h.environment,onConfirm:E,messageComponent:t.jsx(nc,{fromEnvironment:h.fromEnvironment,payload:h.strategy})}),t.jsx(ee,{title:$,children:t.jsx("div",{children:t.jsx(xe,{size:"large",id:`copy-strategy-icon-menu-${n.id}`,"aria-label":$,"aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,onClick:D=>{i(D.currentTarget)},"data-testid":Ta,disabled:!_,children:t.jsx(wa,{})})})}),t.jsx(Xe,{id:"basic-menu",anchorEl:r,open:l,onClose:j,MenuListProps:{"aria-labelledby":`copy-strategy-icon-menu-${n.id}`},children:[...s,e].map(D=>{const I=y(ve,D);return t.jsx(ee,{title:I?"":"You don't have access to add a strategy to this environment",children:t.jsx("div",{children:t.jsxs(Se,{onClick:()=>O(D),disabled:!I,children:[t.jsx(L,{condition:!I,show:t.jsx(De,{children:t.jsx(ka,{fontSize:"small"})})}),t.jsx(Ce,{children:D===e?"Duplicate in current":`Copy to ${D}`})]})})},D)})})]})},oc=()=>t.jsx(Z,{severity:"error",children:"Removing the strategy will change which users receive access to the feature."}),rc=g("div")(({theme:e})=>({"> * + *":{marginTop:e.spacing(1)}})),ic=({changeRequests:e,projectId:s})=>e&&e.length>0?t.jsxs(Z,{severity:"warning",children:[t.jsx("p",{children:"This strategy is in use by at least one scheduled change request. If you remove it, those change requests can no longer be applied."}),t.jsx("p",{children:"The following scheduled change requests use this strategy:"}),t.jsx("ul",{children:e.map(({id:n,title:a})=>{const o=a?`#${n} (${a})`:`#${n}`;return t.jsx("li",{children:t.jsx(ae,{to:`/projects/${s}/change-requests/${n}`,target:"_blank",rel:"noopener noreferrer",title:`Change request ${n}`,children:o})},n)})})]}):e===void 0?t.jsx(Z,{severity:"warning",children:t.jsx("p",{children:"This strategy may be in use by one or more scheduled change requests. If you remove it, those change requests can no longer be applied."})}):null,gn=({scheduledChangeRequestsForStrategy:e})=>t.jsxs(rc,{children:[t.jsx(oc,{}),t.jsx(ic,{projectId:e.projectId,changeRequests:e.changeRequests})]}),cc=({onRemove:e,onClose:s,isOpen:n,scheduledChangeRequestsForStrategy:a})=>t.jsx(ue,{title:"Are you sure you want to delete this strategy?",open:n,primaryButtonText:"Remove strategy",secondaryButtonText:"Cancel",onClick:e,onClose:s,children:t.jsx(gn,{scheduledChangeRequestsForStrategy:a})}),lc=g("div")(({theme:e})=>({marginTop:e.spacing(3),marginBottom:e.spacing(1)})),dc=({onRemove:e,onClose:s,isOpen:n,scheduledChangeRequestsForStrategy:a})=>t.jsxs(ue,{title:"Suggest changes",open:n,primaryButtonText:"Add suggestion to draft",secondaryButtonText:"Cancel",onClick:e,onClose:s,children:[t.jsx(gn,{scheduledChangeRequestsForStrategy:a}),t.jsx(lc,{children:t.jsx(z,{variant:"body2",color:"text.secondary",children:"Your suggestion:"})}),t.jsx(z,{fontWeight:"bold",children:"Remove strategy"})]}),uc=({projectId:e,featureId:s,environmentId:n,strategyId:a})=>{const{deleteStrategyFromFeature:o}=_e(),{setToastData:r,setToastApiError:i}=H(),l=le(),{refetchFeature:c}=W(e,s);return async u=>{try{u.preventDefault(),await o(e,s,n,a),r({text:"Strategy deleted",type:"success"}),c(),l(wt(e,s))}catch(d){i(q(d))}}},pc=({projectId:e,featureId:s,environmentId:n,strategyId:a})=>{const{addChange:o}=pe(),{refetch:r}=ce(e),{setToastData:i,setToastApiError:l}=H();return async p=>{try{p.preventDefault(),await o(e,n,{action:"deleteStrategy",feature:s,payload:{id:a}}),i({text:"Changes added to draft",type:"success"}),await r()}catch(u){l(q(u))}}},gc=({projectId:e,featureId:s,environmentId:n,strategyId:a,isOpen:o,onClose:r})=>{const{isChangeRequestConfigured:i}=te(e),{changeRequests:l}=Vs(e,a),c={changeRequests:l,projectId:e},p=uc({featureId:s,projectId:e,strategyId:a,environmentId:n}),u=pc({featureId:s,projectId:e,strategyId:a,environmentId:n});return i(n)?t.jsx(dc,{isOpen:o,onClose:()=>r(),onRemove:async d=>{await u(d),r()},scheduledChangeRequestsForStrategy:c}):t.jsx(cc,{isOpen:o,onClose:()=>r(),onRemove:p,scheduledChangeRequestsForStrategy:c})},hc=({projectId:e,environmentId:s,featureId:n,strategy:a})=>{const{refetchFeature:o}=W(e,n),{setStrategyDisabledState:r}=_e(),{setToastData:i,setToastApiError:l}=H(),c=p=>async()=>{try{await r(e,n,s,a.id,!p),i({text:`Strategy ${p?"enabled":"disabled"}`,type:"success"}),o()}catch(u){l(q(u))}};return{onDisable:c(!1),onEnable:c(!0)}},xc=({projectId:e,environmentId:s,featureId:n,strategy:a})=>{const{addChange:o}=pe(),{refetch:r}=ce(e),{setToastData:i,setToastApiError:l}=H(),c=p=>async()=>{try{await o(e,s,{action:"updateStrategy",feature:n,payload:{...a,disabled:!p}}),i({text:"Changes added to draft",type:"success"}),await r()}catch(u){l(q(u))}};return{onSuggestDisable:c(!1),onSuggestEnable:c(!0)}},fc=({isOpen:e,onClose:s,...n})=>{var j;const{projectId:a,environmentId:o}=n,{isChangeRequestConfigured:r}=te(a),i=r(o),{onSuggestEnable:l,onSuggestDisable:c}=xc({...n}),{onEnable:p,onDisable:u}=hc({...n}),d=!!((j=n.strategy)!=null&&j.disabled),m=y=>{y.preventDefault(),i?d?l():c():d?p():u(),s()};return t.jsx(ue,{title:i?`Add ${d?"enable":"disable"} strategy to change request?`:`Are you sure you want to ${d?"enable":"disable"} this strategy?`,open:e,primaryButtonText:i?"Add to draft":`${d?"Enable":"Disable"} strategy`,secondaryButtonText:"Cancel",onClick:m,onClose:()=>s(),children:t.jsx(L,{condition:i,show:t.jsx(Ra,{environment:o}),elseShow:t.jsxs(Z,{severity:"error",children:[d?"Enabling":"Disabling"," the strategy will change which users receive access to the feature."]})})})},yc=({projectId:e,strategy:s,featureId:n,environmentId:a})=>{const[o,r]=x.useState(null),[i,l]=x.useState(!1),[c,p]=x.useState(!1),u=!!o,d=b=>{r(b.currentTarget)},m=b=>{r(null),b.stopPropagation()},j=ht(Ns,e,a),y=ht(Da,e,a);return t.jsxs(t.Fragment,{children:[t.jsx(B,{sx:{display:"flex",alignItems:"center",textAlign:"center"},children:t.jsx(ee,{title:"More actions",children:t.jsx(xe,{onClick:d,size:"small","aria-controls":u?"actions-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,"data-testid":Aa,children:t.jsx(St,{sx:{width:32,height:32}})})})}),t.jsxs(Xe,{anchorEl:o,id:"actions-menu",open:u,onClose:m,onClick:m,transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},"data-testid":Ea,children:[t.jsx(ee,{title:s.disabled?"Enable strategy":"Disable strategy",arrow:!0,placement:"left",children:t.jsxs(Se,{disabled:!j,onClick:()=>l(!0),children:[t.jsx(De,{children:s.disabled?t.jsx(Ia,{}):t.jsx($a,{})}),t.jsx(Ce,{children:s.disabled?"Enable":"Disable"})]})}),t.jsx(ee,{title:"Remove strategy",arrow:!0,placement:"left",children:t.jsxs(Se,{disabled:!y,onClick:()=>p(!0),"data-testid":Pa,children:[t.jsx(De,{children:t.jsx(Ts,{})}),t.jsx(Ce,{children:"Remove"})]})})]}),t.jsx(fc,{isOpen:i,onClose:()=>l(!1),projectId:e,featureId:n,environmentId:a,strategy:s}),t.jsx(gc,{isOpen:c,onClose:()=>p(!1),projectId:e,featureId:n,environmentId:a,strategyId:s.id})]})},rs=({strategy:e,index:s,environmentName:n,otherEnvironments:a,isDragging:o,onDragStartRef:r,onDragOver:i,onDragEnd:l})=>{const c=A("projectId"),p=A("featureId");x.useRef(null);const u=Qi(c,p,n,e.id),{changeRequests:d}=Vs(c,e.id),m=Fa(c,p,n,e.id),j=u==null?void 0:u.find(({isScheduledChange:h})=>!h),y=Pe(),b=Qe(y.breakpoints.down("sm"));return t.jsx(Oa,{strategy:e,onDragEnd:l,onDragStartRef:r,onDragOver:i,index:s,isDragging:o,headerItemsRight:t.jsxs(t.Fragment,{children:[j&&!b?t.jsx(Xi,{sx:{mr:1.5},changeAction:j.change.action}):null,d&&d.length>0&&!b?t.jsx(pn,{scheduledChangeRequestIds:(d??[]).map(h=>h.id)}):null,a&&(a==null?void 0:a.length)>0?t.jsx(ac,{environmentId:n,environments:a,strategy:e}):null,t.jsx(Re,{permission:Ns,environmentId:n,projectId:c,component:ae,to:m,tooltipProps:{title:"Edit strategy"},"data-testid":`STRATEGY_EDIT-${e.name}`,children:t.jsx(We,{})}),t.jsx(yc,{projectId:c,featureId:p,environmentId:n,strategy:e})]})})},mc=g("div")(({theme:e})=>({borderBottom:`1px solid ${e.palette.divider}`})),jc=g("div")(({theme:e})=>({padding:e.spacing(2),paddingBottom:e.spacing(0),backgroundColor:_a(e),':has(+ ol>li[data-type="release-plan"])':{backgroundColor:Ba(e)}})),bc=({featureEnvironment:e,isDisabled:s,otherEnvironments:n})=>{const a=A("projectId"),o=A("featureId"),{setStrategiesSortOrder:r}=_e(),{addChange:i}=pe(),{isChangeRequestConfigured:l}=te(a),{refetch:c}=ce(a),{setToastData:p,setToastApiError:u}=H(),{refetchFeature:d}=W(a,o),m=Je("manyStrategiesPagination"),[j,y]=x.useState((e==null?void 0:e.strategies)||[]),{releasePlans:b}=Ke(a,o,e==null?void 0:e.name),{trackEvent:h}=ie(),[f,w]=x.useState(null);x.useEffect(()=>{y((e==null?void 0:e.strategies)||[])},[e==null?void 0:e.strategies]),x.useEffect(()=>{j.length>50&&h("many-strategies")},[]);const E=20,{page:O,pages:_,setPageIndex:$,pageIndex:D}=Ji(j,E);if(!e)return null;const I=async v=>{try{await r(a,o,e.name,v),d(),p({text:"Order of strategies updated",type:"success"})}catch(S){u(q(S))}},R=async v=>{await i(a,e.name,{action:"reorderStrategy",feature:o,payload:v}),p({text:"Strategy execution order added to draft",type:"success"}),c()},M=async v=>{try{l(e.name)?await R(v):await I(v)}catch(S){u(q(S))}},G=(v,S)=>F=>{var V;w({id:j[S].id,index:S,height:((V=v.current)==null?void 0:V.offsetHeight)||0}),v!=null&&v.current&&(F.dataTransfer.effectAllowed="move",F.dataTransfer.setData("text/html",v.current.outerHTML),F.dataTransfer.setDragImage(v.current,20,20))},Q=v=>(S,F)=>V=>{if(f===null||S.current===null||f.index===F||v===f.id)return;const{top:N,bottom:k}=S.current.getBoundingClientRect(),oe=V.clientY-N<f.height,ge=k-V.clientY<f.height,ye=f.index>F;if(oe&&ye||ge&&!ye){const T=[...j],U=T.splice(f.index,1)[0];T.splice(F,0,U),y(T),w({...f,index:F})}},C=()=>{w(null),M(j.map((v,S)=>({id:v.id,sortOrder:S})))},P=j.length>=50&&m;return t.jsxs(mc,{children:[P?t.jsx(jc,{children:t.jsx(Z,{severity:"warning",children:"We noticed you're using a high number of activation strategies. To ensure a more targeted approach, consider leveraging constraints or segments."})}):null,t.jsxs(za,{children:[b.map(v=>t.jsx(Ze,{"data-type":"release-plan",children:t.jsx(zs,{plan:v,environmentIsDisabled:s})},v.id)),P?t.jsx(t.Fragment,{children:O.map((v,S)=>t.jsxs(Ze,{children:[S>0||b.length>0?t.jsx(Mt,{}):null,t.jsx(rs,{strategy:v,index:S+D*E,environmentName:e.name,otherEnvironments:n})]},v.id))}):t.jsx(t.Fragment,{children:j.map((v,S)=>t.jsxs(Ze,{children:[S>0||b.length>0?t.jsx(Mt,{}):null,t.jsx(rs,{strategy:v,index:S,environmentName:e.name,otherEnvironments:n,isDragging:(f==null?void 0:f.id)===v.id,onDragStartRef:G,onDragOver:Q(v.id),onDragEnd:C})]},v.id))})]}),P?t.jsx(br,{count:_.length,shape:"rounded",page:D+1,onChange:(v,S)=>$(S-1)}):null]})},vc=g(Ye)(({theme:e})=>({display:"flex",alignItems:"center",gap:e.spacing(1),color:e.palette.links,fontWeight:e.typography.fontWeightMedium,textDecoration:"none",marginRight:"auto"})),Sc=()=>t.jsx(vc,{component:"a",href:La,underline:"hover",rel:"noopener noreferrer",target:"_blank",children:"Give feedback to release templates"}),Cc=g("div")(({theme:e})=>({borderRadius:e.shape.borderRadiusLarge,backgroundColor:e.palette.background.paper,border:`1px solid ${e.palette.divider}`})),Tc=g(Ma)(({theme:e})=>({boxShadow:"none",background:"none",[`&:has(.${sr}:focus-visible)`]:{background:e.palette.table.headerHover}})),wc=g(Va)(({theme:e})=>({padding:0,background:e.palette.background.elevation1,borderBottomLeftRadius:e.shape.borderRadiusLarge,borderBottomRightRadius:e.shape.borderRadiusLarge,boxShadow:e.boxShadows.accordionFooter})),kc=g("footer")(({theme:e})=>({padding:e.spacing(2,3,3),display:"flex",flexDirection:"column",gap:e.spacing(2)})),Rc=g("div")(({theme:e})=>({width:"100%",position:"relative"})),Dc=({environment:e,metrics:s={yes:0,no:0},otherEnvironments:n=[],onToggleEnvOpen:a=()=>{}})=>{var u,d;const[o,r]=x.useState(!1),i=A("projectId"),l=A("featureId"),{isOss:c}=fe(),p=!!(e!=null&&e.enabled||e!=null&&e.strategies&&(e==null?void 0:e.strategies.length)>0||e!=null&&e.releasePlans&&(e==null?void 0:e.releasePlans.length)>0);return t.jsx(Cc,{children:t.jsxs(Tc,{TransitionProps:{mountOnEnter:!0,unmountOnExit:!0},"data-testid":`${Na}_${e.name}`,expanded:o&&p,onChange:()=>{const m=o?!o:p;a(m),r(m)},children:[t.jsxs(nr,{environmentMetadata:{strategyCount:((u=e.strategies)==null?void 0:u.length)??0,releasePlanCount:((d=e.releasePlans)==null?void 0:d.length)??0},environmentId:e.name,expandable:p,children:[t.jsx(Gi,{environment:e}),p?t.jsx(Hi,{environmentMetric:s}):t.jsx(os,{label:"Add strategy",projectId:i,featureId:l,environmentId:e.name,variant:"outlined",size:"small"})]}),t.jsxs(wc,{children:[t.jsx(Rc,{children:t.jsx(bc,{featureEnvironment:e,isDisabled:!e.enabled,otherEnvironments:n})}),t.jsxs(kc,{children:[t.jsxs(B,{sx:{display:"flex",flexDirection:"row"},children:[t.jsx(Sc,{}),t.jsx(B,{ml:"auto",children:t.jsx(os,{label:"Add strategy",projectId:i,featureId:l,environmentId:e.name})})]}),c()&&(e==null?void 0:e.type)==="production"?t.jsx(qa,{}):null]})]})]})})},is={lastHourUsage:[],seenApplications:[]},Ac=(e,s,n={})=>{const a=async()=>{const u=Fe(`api/admin/client-metrics/features/${s}`),d=await fetch(u,{method:"GET"}).then(Oe("feature metrics"));return d.ok?d.json():is},o=`${e}_${s}_metrics`,{data:r,error:i}=Ms(o,a,{...n}),[l,c]=x.useState(!i&&!r),p=()=>{Rs(o)};return x.useEffect(()=>{c(!i&&!r)},[r,i]),{metrics:r||is,error:i,loading:l,refetch:p,FEATURE_METRICS_CACHE_KEY:o}},Ec=e=>({yes:0,no:0,environment:e,timestamp:""}),Ic=(e,s)=>e.map(n=>s.lastHourUsage.find(o=>o.environment===n.name)||Ec(n.name)),$c=({environment:e,...s})=>{const n=A("projectId"),a=A("featureId"),{releasePlans:o}=Ke(n,a,e==null?void 0:e.name);return t.jsx(Dc,{...s,environment:{...e,releasePlans:o}})},Pc=({hiddenEnvironments:e=[],onToggleEnvOpen:s})=>{var l;const n=A("projectId"),a=A("featureId"),{feature:o}=W(n,a),{metrics:r}=Ac(n,a),i=Ic(o==null?void 0:o.environments,r);return o?(l=o.environments)==null?void 0:l.filter(c=>!e.includes(c.name)).map(c=>{var p;return t.jsx($c,{onToggleEnvOpen:s,environment:c,metrics:i.find(u=>u.environment===(c==null?void 0:c.name)),otherEnvironments:((p=o.environments)==null?void 0:p.map(u=>u.name).filter(u=>u!==c.name&&!e.includes(u)))||[]},c.name)}):null},Fc=()=>{const[e,s]=qs("environment-visibiilty",[]),{trackEvent:n}=ie();return{hiddenEnvironments:e,onEnvironmentVisibilityChange:o=>{e.includes(o)?(s(e.filter(r=>r!==o)),n("hidden_environment",{props:{eventType:"environment unhidden"}})):(s([...e,o]),n("hidden_environment",{props:{eventType:"environment hidden"}}))}}},Oc=g(B)(({theme:e})=>({display:"flex",flexDirection:"column",gap:e.spacing(1),maxWidth:"300px",background:"#201e42",borderRadius:e.shape.borderRadiusMedium,color:e.palette.common.white,padding:e.spacing(2),paddingRight:e.spacing(1),fontSize:e.typography.body2.fontSize})),_c=g(ne)(({theme:e})=>({color:e.palette.secondary.border,alignSelf:"start",marginLeft:e.spacing(-1)})),Bc=g(xe)(({theme:e})=>({color:e.palette.common.white,background:"none",border:"none",position:"absolute",top:e.spacing(1),right:e.spacing(1),svg:{width:e.spacing(2),height:e.spacing(2)}})),zc=g("p")(({theme:e})=>({fontSize:e.typography.body1.fontSize,fontWeight:"bold"})),Lc=({closeProps:e})=>t.jsxs(Oc,{component:"article",children:[t.jsx(Bc,{type:"button",...e,children:t.jsx(kt,{})}),t.jsx(zc,{children:"Decide the order evaluation"}),t.jsx("p",{children:"Strategies are evaluated in the order presented here. Drag and rearrange the strategies to get the order you prefer."}),t.jsx(_c,{type:"button","data-action":e["data-action"],onClick:e.onClick,children:"Ok, got it!"})]}),Mc=({show:e,onClose:s})=>t.jsx(Wa,{callback:({action:n})=>{n==="close"&&s()},floaterProps:{styles:{arrow:{color:"#201e42",spread:16,length:10}}},run:e,disableOverlay:!0,disableScrolling:!0,tooltipComponent:Lc,steps:[{disableBeacon:!0,offset:0,target:".strategy-drag-handle",content:t.jsx(t.Fragment,{})}]});var It={},Vc=Ie;Object.defineProperty(It,"__esModule",{value:!0});var jt=It.default=void 0,Nc=Vc(Ee()),qc=t,Wc=(0,Nc.default)((0,qc.jsx)("path",{d:"M16 11h-1V3c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v8H8c-2.76 0-5 2.24-5 5v7h18v-7c0-2.76-2.24-5-5-5zm3 10h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3h-2v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H9v-3c0-.55-.45-1-1-1s-1 .45-1 1v3H5v-5c0-1.65 1.35-3 3-3h8c1.65 0 3 1.35 3 3v5z"}),"CleaningServices");jt=It.default=Wc;const Hc="flag-reminders:v1",Uc=50,Gc=7,Yc=({days:e=Gc,maxReminders:s=Uc}={})=>{const[n,a]=qs(Hc,{});return{shouldShowReminder:i=>{const l=n[i];return!l||Ha(new Date,new Date(l))},snoozeReminder:(i,l=e)=>{const c=Ua(new Date,l).getTime();a(p=>{const u={...p,[i]:c},d=Object.entries(u);if(d.length>s){d.sort((j,y)=>j[1]-y[1]);const m=d.slice(d.length-s);return Object.fromEntries(m)}return u})}}},Jc=g(B)(({theme:e})=>({marginBottom:e.spacing(2)})),cs=g(B)(({theme:e})=>({display:"flex",gap:e.spacing(1),alignItems:"center"})),Kc=30,Qc=3,Xc=({feature:e,onChange:s})=>{const n=le(),{trackEvent:a}=ie(),[o,r]=x.useState(!1),[i,l]=x.useState(!1),{onUncompleteHandler:c,loading:p}=Ga({feature:e.name,project:e.project,onChange:s}),u=Ya(e),d=e.type==="release"||e.type==="experiment",m=u==null?void 0:u.enteredStageAt,j=m?Ja(new Date,Ct(m)):0,{shouldShowReminder:y,snoozeReminder:b}=Yc(),f=(()=>{if(!u||!d)return null;if(u.name==="live"&&j>Kc)return"complete";if(u.name==="completed"&&y(e.name)){if(Qa(u.environments))return"archive";if(j>Qc)return"removeCode"}return null})();return f?t.jsxs(Jc,{children:[f==="complete"&&t.jsxs(t.Fragment,{children:[t.jsxs(Z,{severity:"info",icon:t.jsx(Ka,{}),action:t.jsx(K,{variant:"contained",permission:Te,size:"medium",onClick:()=>r(!0),projectId:e.project,children:"Mark completed"}),children:[t.jsx("b",{children:"Is this flag ready to be completed?"}),t.jsxs("p",{children:["This flag has been in production for"," ",t.jsxs("b",{children:[j," days"]}),". Can it be removed from the code?"]})]}),t.jsx(Ks,{isOpen:o,setIsOpen:r,projectId:e.project,featureId:e.name,onComplete:s})]}),f==="archive"&&t.jsxs(t.Fragment,{children:[t.jsxs(Z,{severity:"warning",icon:t.jsx(jt,{}),action:t.jsxs(cs,{children:[t.jsx(ne,{size:"medium",onClick:()=>{b(e.name),a("feature-lifecycle",{props:{eventType:"snoozeReminder"}})},children:"Remind me later"}),t.jsx(K,{variant:"contained",permission:Ws,size:"medium",onClick:()=>l(!0),projectId:e.project,children:"Archive flag"})]}),children:[t.jsx("b",{children:"Time to clean up technical debt?"}),t.jsx("p",{children:"We haven't observed any metrics for this flag lately. Can it be archived?"})]}),e.children.length>0?t.jsx(At,{features:e.children,project:e.project,isOpen:i,onClose:()=>l(!1)}):t.jsx(Dt,{isOpen:i,onConfirm:()=>{n(`/projects/${e.project}`)},onClose:()=>l(!1),projectId:e.project,featureIds:[e.name]})]}),f==="removeCode"&&t.jsxs(Z,{severity:"warning",icon:t.jsx(jt,{}),action:t.jsxs(cs,{children:[t.jsx(ne,{size:"medium",onClick:()=>{b(e.name),a("feature-lifecycle",{props:{eventType:"snoozeReminder"}})},children:"Remind me later"}),t.jsx(K,{variant:"outlined",permission:Te,size:"medium",onClick:c,disabled:p,projectId:e.project,children:"Revert to production"})]}),children:[t.jsx("b",{children:"Time to remove flag from code?"}),t.jsx("p",{children:"This flag was marked as complete and ready for cleanup. We're still seeing it being used within the last 2 days. Have you removed the flag from your code?"})]})]}):null},Zc=g("div")(({theme:e})=>({display:"flex",width:"100%",gap:e.spacing(2),[e.breakpoints.down("md")]:{flexDirection:"column"}})),el=g("div")(({theme:e})=>({display:"flex",flexDirection:"column",flexGrow:1,gap:e.spacing(2)})),tl=()=>{const e=le(),s=A("projectId"),n=A("featureId"),a=wt(s,n),{hiddenEnvironments:o,onEnvironmentVisibilityChange:r}=Fc(),i=()=>e(a);Hs(n);const{setLastViewed:l}=ii();x.useEffect(()=>{l({featureId:n,projectId:s})},[n]);const{setSplashSeen:c}=Xa(),{splash:p}=Za(),[u,d]=x.useState(!1),[m,j]=x.useState(!1),{feature:y,refetchFeature:b,loading:h}=W(s,n),f="strategy-drag-tooltip",w=!(p!=null&&p[f]),E=_=>{d(!m&&w&&_)},O=()=>{j(!0),c(f)};return t.jsxs("div",{children:[t.jsx(Xc,{feature:y,onChange:b}),t.jsxs(Zc,{children:[t.jsx("div",{children:h?null:t.jsx(ni,{hiddenEnvironments:o,onEnvironmentVisibilityChange:r,feature:y,onChange:b})}),t.jsx(el,{children:t.jsx(Pc,{onToggleEnvOpen:E,hiddenEnvironments:o})}),t.jsxs(Us,{children:[t.jsx(be,{path:"strategies/create",element:t.jsx(xt,{label:"Create feature strategy",onClose:i,open:!0,children:t.jsx(oi,{})})}),t.jsx(be,{path:"strategies/edit",element:t.jsx(xt,{label:"Edit feature strategy",onClose:i,open:!0,children:t.jsx(eo,{})})})]})]}),t.jsx(Mc,{show:u,onClose:O})]})},sl=g("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between","& > div":{display:"flex",alignItems:"center"},marginTop:e.spacing(-3.5),marginBottom:e.spacing(2),backgroundColor:e.palette.background.default,paddingTop:e.spacing(2),paddingBottom:e.spacing(2),position:"sticky",top:0,zIndex:2})),nl=g(Gs,{shouldForwardProp:e=>e!=="deprecated"})(({theme:e,deprecated:s})=>({color:s?e.palette.neutral.border:e.palette.primary.main})),al=g("span",{shouldForwardProp:e=>e!=="deprecated"})(({theme:e,deprecated:s})=>({color:s?e.palette.text.secondary:e.palette.text.primary,marginLeft:e.spacing(1.25),fontSize:e.fontSizes.mainHeader,fontWeight:e.fontWeight.bold})),ol=g("form")(()=>({display:"flex",flexDirection:"column",height:"100%"})),rl=g(Z)(({theme:e})=>({marginBottom:e.spacing(2)})),il=g(Z)(({theme:e})=>({marginTop:e.spacing(4)})),cl=g("div")({display:"flex",flexDirection:"column"}),ll=g("div")(({theme:e})=>({display:"flex",alignItems:"center",gap:e.spacing(1.5),marginBottom:e.spacing(.5)})),ls=g("p")(({theme:e})=>({fontSize:e.fontSizes.smallBody,color:e.palette.text.secondary,marginBottom:e.spacing(1.5)})),dl=g(Ys)(({theme:e})=>({margin:e.spacing(4,0)})),ul=g(to)(({theme:e})=>({minWidth:e.spacing(20),width:"100%"})),pl=g("div")(({theme:e})=>({marginTop:"auto",paddingTop:e.spacing(4),display:"flex",justifyContent:"flex-end"})),gl=g(ne)(({theme:e})=>({marginLeft:e.spacing(3)})),hl=x.memo(so),xl=({environment:e,open:s,setOpen:n,getApiPayload:a,getCrPayload:o,onConfirm:r})=>{const i=A("projectId"),l=A("featureId"),{uiConfig:c}=fe(),{context:p}=no(),{defaultStickiness:u,loading:d}=ao(i),{isChangeRequestConfigured:m}=te(i),{data:j}=ce(i),{changeRequestInReviewOrApproved:y,alert:b}=ro(j),h=(e==null?void 0:e.variants)||[],[f,w]=x.useState([]),[E,O]=x.useState();x.useEffect(()=>{d||w(h.length?h.map(T=>({...T,isValid:!0,new:!1,id:et()})):[{name:"",weightType:Vt.VARIABLE,weight:0,overrides:[],stickiness:(f==null?void 0:f.length)>0?f[0].stickiness:u,new:!0,isValid:!1,id:et()}])},[s,d]);const _=(T,U)=>{w(me=>Nt(me.map(Y=>Y.id===U?T:Y),1e3))},$=()=>{const T=et();w(U=>[...U,{name:"",weightType:Vt.VARIABLE,weight:0,overrides:[],stickiness:(U==null?void 0:U.length)>0?U[0].stickiness:u,new:!0,isValid:!1,id:T}]),O(T)};x.useEffect(()=>{if(E){const T=document.getElementById(`variant-name-input-${E}`);T==null||T.scrollIntoView({behavior:"smooth",block:"center"}),T==null||T.focus({preventScroll:!0}),O(void 0)}},[E]);const D=f.map(({new:T,isValid:U,id:me,...Y})=>Y),I=a(h,D),R=o(D),M=async T=>{T.preventDefault(),r(D)},G=()=>v?`curl --location --request POST '${c.unleashUrl}/api/admin/projects/${i}/environments/${e==null?void 0:e.name}/change-requests' \\
    --header 'Authorization: INSERT_API_KEY' \\
    --header 'Content-Type: application/json' \\
    --data-raw '${JSON.stringify(R,void 0,2)}'`:`curl --location --request PATCH '${c.unleashUrl}/api/admin/projects/${i}/features/${l}/environments/${e==null?void 0:e.name}/variants' \\
    --header 'Authorization: INSERT_API_KEY' \\
    --header 'Content-Type: application/json' \\
    --data-raw '${JSON.stringify(I.patch,void 0,2)}'`,Q=f.every(({isValid:T})=>T),C=y((e==null?void 0:e.name)||""),P=C?"Add to existing change request":"Add change to draft",v=m((e==null?void 0:e.name)||""),S=x.useMemo(()=>{var T;return d?"":((T=D[0])==null?void 0:T.stickiness)||u},[d,u,JSON.stringify(D[0]??{})]),F=x.useMemo(()=>["default",...p.filter(T=>T.stickiness).map(T=>T.name)],[p]),V=F.map(T=>({key:T,label:T}));F.includes(S)||V.push({key:S,label:S});const N=async T=>{w(U=>U.map(me=>({...me,stickiness:T})))},k=T=>{N(T)},[oe,ge]=x.useState();x.useEffect(()=>{ge(void 0),I.error&&ge(I.error)},[I.error]);const ye=()=>{N(u),n(!1)};return d||S===""?t.jsx(oo,{}):t.jsx(xt,{open:s,onClose:ye,label:"",children:t.jsxs(Ps,{modal:!0,title:"",description:"Variants allow you to return a variant object if the feature flag is considered enabled for the current request.",documentationLink:"https://docs.getunleash.io/reference/feature-toggle-variants",documentationLinkLabel:"Feature flag variants documentation",formatApiCode:G,loading:!s,children:[t.jsxs(sl,{children:[t.jsxs("div",{children:[t.jsx(nl,{deprecated:!(e!=null&&e.enabled)}),t.jsx(al,{deprecated:!(e!=null&&e.enabled),children:e==null?void 0:e.name})]}),t.jsx(K,{"data-testid":"MODAL_ADD_VARIANT_BUTTON",onClick:$,variant:"outlined",permission:ke,projectId:i,environmentId:e==null?void 0:e.name,children:"Add variant"})]}),t.jsxs(ol,{onSubmit:M,children:[t.jsx(L,{condition:C,show:b,elseShow:t.jsx(L,{condition:!!v,show:t.jsxs(rl,{severity:"info",children:[t.jsx("strong",{children:"Change requests"})," are enabled",e?` for ${e.name}`:"",". Your changes need to be approved before they will be live. All the changes you do now will be added into a draft that you can submit for review."]})})}),t.jsx(cl,{children:f.map(T=>t.jsx(hl,{variant:T,variants:f,updateVariant:U=>_(U,T.id),removeVariant:()=>w(U=>Nt(U.filter(me=>me.id!==T.id),1e3)),error:I.error},T.id))}),t.jsx(K,{onClick:$,variant:"outlined",permission:ke,projectId:i,environmentId:e==null?void 0:e.name,children:"Add variant"}),t.jsx(dl,{}),t.jsx(L,{condition:f.length>0,show:t.jsxs(t.Fragment,{children:[t.jsx(ll,{children:t.jsx("p",{children:"Stickiness"})}),t.jsxs(ls,{children:["By overriding the stickiness you can control which parameter is used to ensure consistent traffic allocation across variants."," ",t.jsx(Ye,{href:"https://docs.getunleash.io/reference/feature-toggle-variants",target:"_blank",rel:"noreferrer",children:"Read more"})]}),t.jsx("div",{children:t.jsx(ul,{value:S,label:"",editable:!0,onChange:T=>k(T.target.value)})})]}),elseShow:t.jsx(ls,{children:"This environment has no variants. Get started by adding a variant."})}),t.jsxs(il,{severity:"error",hidden:!oe,children:[t.jsx("strong",{children:"Error: "}),oe]}),t.jsxs(pl,{children:[t.jsx(ne,{"data-testid":"DIALOGUE_CONFIRM_ID",type:"submit",variant:"contained",color:"primary",disabled:!Q,children:v?P:"Save variants"}),t.jsx(gl,{onClick:ye,children:"Cancel"})]})]})]})})},fl=e=>fetch(e).then(Oe("ChangeRequest")).then(s=>s.json()),yl=(e,s)=>{const{data:n,error:a,mutate:o}=Ls([],Fe(`api/admin/projects/${e}/change-requests/scheduled?variantForFlag=${s}`),fl);return{changeRequests:n,loading:!a&&!n,refetch:o,error:a}},ml=(e,s,n)=>{const{changeRequests:a}=yl(e,s),o=a==null?void 0:a.filter(r=>r.environment===n);return o?o.map(r=>r.id):[]},jl=g("div")(({theme:e})=>({padding:e.spacing(3),borderRadius:e.shape.borderRadiusLarge,border:`1px solid ${e.palette.divider}`,"&:not(:last-child)":{marginBottom:e.spacing(3)}})),bl=g("div")({display:"flex",alignItems:"center",justifyContent:"space-between","& > div":{display:"flex",alignItems:"center"}}),vl=g(Gs,{shouldForwardProp:e=>e!=="deprecated"})(({theme:e,deprecated:s})=>({color:s?e.palette.neutral.border:e.palette.primary.main})),Sl=g("span",{shouldForwardProp:e=>e!=="deprecated"})(({theme:e,deprecated:s})=>({color:s?e.palette.text.secondary:e.palette.text.primary,marginLeft:e.spacing(1.25),fontWeight:e.fontWeight.bold})),Cl=g("p")(({theme:e})=>({fontSize:e.fontSizes.smallBody,color:e.palette.text.secondary,marginBottom:e.spacing(1.5)})),Tl=g("div")(({theme:e})=>({margin:e.spacing(3,0)})),wl=g("div")(({theme:e})=>({display:"flex",alignItems:"center",gap:e.spacing(1.5),marginBottom:e.spacing(.5)})),kl=({environment:e,searchValue:s,children:n})=>{var c;const a=A("projectId"),o=A("featureId"),r=ml(a,o,e.name),i=e.variants??[],l=((c=i[0])==null?void 0:c.stickiness)||"default";return t.jsxs(jl,{children:[t.jsxs(bl,{children:[t.jsxs("div",{children:[t.jsx(vl,{deprecated:!e.enabled}),t.jsx(Sl,{deprecated:!e.enabled,children:e.name}),t.jsx(L,{condition:r.length>0,show:t.jsx(io,{sx:{ml:2},children:t.jsx(pn,{scheduledChangeRequestIds:r})})})]}),n]}),t.jsx(L,{condition:i.length>0,show:t.jsxs(t.Fragment,{children:[t.jsx(Tl,{children:t.jsx(co,{variants:i,searchValue:s})}),t.jsx(L,{condition:i.length>1,show:t.jsxs(t.Fragment,{children:[t.jsxs(wl,{children:[t.jsx("p",{children:"Stickiness:"}),t.jsx(Ae,{children:l})]}),t.jsxs(Cl,{children:["By overriding the stickiness you can control which parameter is used to ensure consistent traffic allocation across variants."," ",t.jsx(Ye,{href:"https://docs.getunleash.io/reference/feature-toggle-variants",target:"_blank",rel:"noreferrer",children:"Read more"})]})]})})]})})]})},Rl=g(Ce)(({theme:e})=>({"& span":{fontSize:e.fontSizes.smallBody}})),Dl=({environment:e,permission:s,projectId:n,environmentId:a,onCopyVariantsFrom:o,otherEnvsWithVariants:r})=>{const[i,l]=x.useState(null),c=!!i,p=e.variants??[];return t.jsx(L,{condition:r.length>0&&p.length===0,show:t.jsxs(t.Fragment,{children:[t.jsx(K,{onClick:u=>{l(u.currentTarget)},id:`copy-from-menu-${e.name}`,"aria-controls":c?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":c?"true":void 0,variant:"outlined",permission:s,projectId:n,environmentId:a,children:"Copy variants from"}),t.jsx(Xe,{anchorEl:i,open:c,onClose:()=>l(null),MenuListProps:{"aria-labelledby":`copy-from-menu-${e.name}`},children:r.map(u=>t.jsx(Se,{onClick:()=>o(u,e),children:t.jsx(Rl,{children:`Copy from ${u.name}`})},u.name))})]})})},Al=({permission:e,projectId:s,environment:n,checked:a,onClick:o,...r})=>{const i=ht(e,s,n);return t.jsxs(Se,{disabled:!i,onClick:o,...r,children:[t.jsx(bs,{checked:a}),n]})},El=g(Xe)(({theme:e})=>({"& > div > ul":{display:"flex",flexDirection:"column",justifyContent:"center","& > li":{padding:e.spacing(0,1)}}})),Il=g("div")(({theme:e})=>({margin:e.spacing(1,2)})),$l=g(ne)(({theme:e})=>({marginTop:e.spacing(2)})),Pl=({current:e,environments:s,permission:n,projectId:a,onSubmit:o})=>{var b;const[r,i]=x.useState(null),l=!!r,[c,p]=x.useState([]),u=h=>{p(f=>[...f,h])},d=h=>{p(f=>f.filter(({name:w})=>w!==h.name))},m=h=>{c.includes(h)?d(h):u(h)},j=()=>{p([]),i(null)},y=((b=s.find(h=>h.name===e))==null?void 0:b.variants)??[];return t.jsx(L,{condition:y.length>0&&s.length>1,show:t.jsxs(t.Fragment,{children:[t.jsx(ne,{onClick:h=>{i(h.currentTarget)},id:`push-to-menu-${e}`,"aria-controls":l?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,variant:"outlined",children:"Copy to environment"}),t.jsxs(El,{anchorEl:r,open:l,onClose:()=>i(null),MenuListProps:{"aria-labelledby":`push-to-menu-${e}`},children:[s.filter(h=>h.name!==e).map(h=>t.jsx(Al,{projectId:a,permission:n,environment:h.name,checked:c.includes(h),onClick:()=>m(h)},h.name)),t.jsxs(Il,{children:[t.jsx(Ys,{}),t.jsxs($l,{variant:"outlined",onClick:()=>{o(c),j()},disabled:c.length===0,children:["Push to selected (",c.length,")"]})]})]})]})})},Fl=g("div")(({theme:e})=>({display:"flex",gap:e.spacing(1.5)})),Ol=()=>{const{setToastData:e,setToastApiError:s}=H(),n=Pe(),a=Qe(n.breakpoints.down("md")),o=A("projectId"),r=A("featureId"),{feature:i,refetchFeature:l,loading:c}=W(o,r),{patchFeatureEnvironmentVariants:p,overrideVariantsInEnvironments:u}=Ge(),{refetch:d}=ce(o),{addChange:m}=pe(),{isChangeRequestConfigured:j}=te(o),[y,b]=x.useState(""),[h,f]=x.useState(),[w,E]=x.useState(!1),O=x.useMemo(()=>{var C;return((C=i==null?void 0:i.environments)==null?void 0:C.map(P=>({...P,crEnabled:j(P.name)})))||[]},[i.environments]),_=(C,P)=>go(C,P),$=(C,P)=>{try{const v=po(P,1e3);return{patch:_(C,v)}}catch(v){return{patch:[],error:q(v)}}},D=C=>({feature:r,action:"patchVariant",payload:{variants:C}}),I=async(C,P)=>{if(C.crEnabled)await m(o,C.name,D(P)),d();else{const v=C.variants??[],{patch:S,error:F}=$(v,P);if(S.length===0)return;if(F){e({type:"error",text:F});return}await p(o,r,C.name,S)}l()},R=async(C,P)=>{try{const v=P.filter(({crEnabled:k})=>k),S=P.filter(({crEnabled:k})=>!k);v.length&&await Promise.all(v.map(k=>m(o,k.name,D(C)))),S.length&&await u(o,r,C,S.map(({name:k})=>k)),d(),l();const F=S.length?`Variants pushed to ${S.length===1?S[0].name:`${S.length} environments`}`:"",V=v.length?`Variants push added to ${v.length===1?`${v[0].name} draft`:`${v.length} drafts`}`:"",N=`${F}${F&&V?". ":""}${V}`;e({text:N,type:"success"})}catch(v){s(q(v))}},M=C=>{f(C),E(!0)},G=async C=>{if(h)try{await I(h,C),E(!1),e({text:h.crEnabled?"Variant changes added to draft":"Variants updated successfully",type:"success"})}catch(P){s(q(P))}},Q=async(C,P)=>{try{const v=C.variants??[];await I(P,v),e({text:P.crEnabled?"Variants copy added to draft":"Variants copied successfully",type:"success"})}catch(v){s(q(v))}};return t.jsxs(Rt,{isLoading:c,header:t.jsx(lo,{title:"Variants",actions:t.jsx(L,{condition:!a,show:t.jsx(t.Fragment,{children:t.jsx(qt,{initialValue:y,onChange:b})})}),children:t.jsx(L,{condition:a,show:t.jsx(qt,{initialValue:y,onChange:b})})}),children:[t.jsx(uo,{}),O.map(C=>{var v;const P=O.filter(({name:S,variants:F})=>S!==C.name&&(F==null?void 0:F.length));return t.jsx(kl,{environment:C,searchValue:y,children:t.jsxs(Fl,{children:[t.jsx(Pl,{current:C.name,environments:O,permission:ke,projectId:o,onSubmit:S=>R(C.variants??[],S)}),t.jsx(Dl,{environment:C,permission:ke,projectId:o,environmentId:C.name,onCopyVariantsFrom:Q,otherEnvsWithVariants:P}),t.jsx(L,{condition:!!((v=C.variants)!=null&&v.length),show:t.jsx(Re,{"data-testid":"EDIT_VARIANTS_BUTTON",onClick:()=>M(C),permission:ke,projectId:o,environmentId:C.name,tooltipProps:{title:"Edit variants"},children:t.jsx(We,{})}),elseShow:t.jsx(K,{"data-testid":"ADD_VARIANT_BUTTON",onClick:()=>M(C),variant:"outlined",permission:ke,projectId:o,environmentId:C.name,children:"Add variant"})})]})},C.name)}),t.jsx(xl,{environment:h,open:w,setOpen:E,getApiPayload:$,getCrPayload:D,onConfirm:G})]})},_l=({value:e,timeZone:s})=>{const{locationSettings:n}=$s(),a=e?e instanceof Date?Wt(e,n.locale,s):Wt(Ct(e),n.locale,s):void 0;return t.jsx(Ne,{lineClamp:1,children:a})};var $t={},Bl=Ie;Object.defineProperty($t,"__esModule",{value:!0});var hn=$t.default=void 0,zl=Bl(Ee()),Ll=t,Ml=(0,zl.default)((0,Ll.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"}),"Assessment");hn=$t.default=Ml;const Vl=g(z)(({theme:e})=>({fontSize:e.fontSizes.smallerBody})),Nl=({row:e})=>e.original.selectedApplications&&e.original.selectedApplications.length>1?t.jsx(Ne,{children:t.jsx(He,{tooltip:t.jsx(t.Fragment,{children:e.original.selectedApplications.map(s=>t.jsx(Vl,{children:s},s))}),children:e.original.appName})}):t.jsx(Ne,{children:e.original.appName}),ql=({metrics:e,tableSectionId:s})=>{const n=Qe(ho.breakpoints.down("md")),a=x.useMemo(()=>({sortBy:[{id:"timestamp"}]}),[]),{getTableProps:o,getTableBodyProps:r,headerGroups:i,rows:l,prepareRow:c,setHiddenColumns:p}=tt.useTable({initialState:a,columns:ds,data:e,autoResetHiddenColumns:!1,disableSortRemove:!0,defaultColumn:{Cell:Ne}},tt.useGlobalFilter,tt.useSortBy);return xo([{condition:n,columns:["appName","environment"]}],p,ds),e.length===0?null:t.jsxs(fo,{...o(),rowHeight:"standard",id:s,children:[t.jsx(yo,{headerGroups:i}),t.jsx(mo,{...r(),children:l.map(u=>{c(u);const{key:d,...m}=u.getRowProps();return t.jsx(jo,{hover:!0,...m,children:u.cells.map(j=>{const{key:y,...b}=j.getCellProps();return t.jsx(bo,{...b,children:j.render("Cell")},y)})},d)})})]})},ds=[{id:"Icon",width:"1%",disableSortBy:!0,Cell:()=>t.jsx(vo,{icon:t.jsx(hn,{color:"disabled"})})},{Header:"Time",accessor:"timestamp",Cell:e=>t.jsx(_l,{value:e.row.original.timestamp,timeZone:e.row.original.timestamp.includes("23:59")?"UTC":void 0})},{Header:"Application",accessor:"appName",Cell:Nl},{Header:"Environment",accessor:"environment"},{id:"requested",Header:"Requested",accessor:e=>e.yes+e.no},{Header:"Exposed",accessor:"yes"}],Wl=e=>e>48?`${Math.floor(e/24)} days (UTC)`:`${e} hours (local time)`,ct=g("article")(({theme:e})=>({padding:e.spacing(2),background:"transparent",borderRadius:e.spacing(2),textAlign:"center",[e.breakpoints.up("md")]:{padding:e.spacing(4)}})),lt=g("h3")(({theme:e})=>({margin:0,fontSize:e.fontSizes.bodySize,fontWeight:e.fontWeight.thin})),dt=g("p")(({theme:e})=>({fontSize:"2.25rem",fontWeight:e.fontWeight.bold,color:e.palette.primary.main})),ut=g("p")(({theme:e})=>({margin:e.spacing(1,0,0,0),padding:e.spacing(2,0,0,0),borderTopWidth:"1px",borderTopStyle:"solid",borderTopColor:e.palette.divider,fontSize:e.fontSizes.smallerBody,color:e.palette.text.secondary})),Hl=({totalYes:e,totalNo:s,hoursBack:n,statsSectionId:a,tableSectionId:o})=>{const r=n===1?"in the last hour":`in the last ${Wl(n)}`;return t.jsxs(he,{container:!0,spacing:2,id:a,"aria-describedby":o,"aria-label":"Feature metrics summary",component:"section",children:[t.jsx(he,{item:!0,xs:12,sm:4,children:t.jsxs(ct,{children:[t.jsx(lt,{children:"Exposure"}),t.jsx(dt,{children:t.jsx(Ve,{value:e})}),t.jsxs(ut,{children:["Total exposure of the feature in the environment"," ",r,"."]})]})}),t.jsx(he,{item:!0,xs:12,sm:4,children:t.jsxs(ct,{children:[t.jsx(lt,{children:"Exposure %"}),t.jsxs(dt,{children:[dn(e+s,e),"%"]}),t.jsxs(ut,{children:["% total exposure of the feature in the environment"," ",r,"."]})]})}),t.jsx(he,{item:!0,xs:12,sm:4,children:t.jsxs(ct,{children:[t.jsx(lt,{children:"Requests"}),t.jsx(dt,{children:t.jsx(Ve,{value:e+s})}),t.jsxs(ut,{children:["Total requests for the feature in the environment"," ",r,"."]})]})})]})},Ul=({metrics:e,...s})=>{const n=x.useMemo(()=>e.reduce((o,r)=>o+r.yes,0),[e]),a=x.useMemo(()=>e.reduce((o,r)=>o+r.no,0),[e]);return t.jsx(Hl,{...s,totalYes:n,totalNo:a})},Gl=({metrics:e,hoursBack:s})=>{const n=Ht(),a=Ht();return e.length===0?t.jsxs(B,{mt:6,children:[t.jsx(z,{variant:"body1",paragraph:!0,children:"We have yet to receive any metrics for this feature flag in the selected time period."}),t.jsx(z,{variant:"body1",paragraph:!0,children:"Please note that, since the SDKs send metrics on an interval, it might take some time before metrics appear."})]}):t.jsxs(x.Suspense,{fallback:null,children:[t.jsx(B,{borderTop:1,pt:2,mt:3,borderColor:"divider",children:t.jsx(Yl,{metrics:e,hoursBack:s,statsSectionId:n})}),t.jsx(B,{mt:4,children:t.jsx(Ul,{metrics:e,hoursBack:s,statsSectionId:n,tableSectionId:a})}),t.jsx(B,{mt:4,children:t.jsx(ql,{metrics:e,tableSectionId:a})})]})},Yl=So.lazy(()=>Co(()=>import("./FeatureMetricsChart-CXpaGFz-.js"),[])),Jl=g("h2")(({theme:e})=>({margin:0,marginBottom:e.spacing(1.5),fontSize:e.fontSizes.smallBody,fontWeight:e.fontWeight.thin,color:e.palette.text.secondary})),Kl=g("ul")(({theme:e})=>({display:"flex",flexWrap:"wrap",gap:e.spacing(1),listStyleType:"none",padding:0,minHeight:"100%",alignItems:"center",maxHeight:"200px",overflowY:"auto"})),Ql=g("li")(({theme:e})=>({"& > [aria-pressed=true]":{backgroundColor:e.palette.background.alternative,color:e.palette.primary.contrastText},"& > [aria-pressed=true]:hover":{backgroundColor:e.palette.primary.light}})),us=({title:e,values:s,selectedValues:n,toggleValue:a,toggleValues:o})=>{const r=c=>()=>{a(c)},i=[...s].every(c=>n.includes(c)),l=x.useMemo(()=>Array.from(s).sort((c,p)=>c.localeCompare(p)),[s]);return t.jsxs("div",{children:[t.jsx(Jl,{children:e}),t.jsxs(Kl,{children:[o&&s.size>1&&t.jsx(ne,{size:"small",onClick:o,"aria-pressed":i,children:i?"Unselect":"Select all"}),l.map(c=>t.jsx(Ql,{children:t.jsx(As,{label:c,onClick:r(c),"aria-pressed":n==null?void 0:n.includes(c),sx:To})},c))]})]})},Xl=()=>{const e=A("projectId"),s=A("featureId"),n=Zl(e,s);Hs("Metrics");const a=Array.from(n)[0],[o,r]=wo({environment:st(ko,a),applications:st(Ro,[]),hoursBack:st(Do,ft)}),i=ed(s,o.hoursBack||ft),l=Array.from(i),c=l[0],{environment:p,hoursBack:u}=o,d=o.applications.filter(f=>f!==null);x.useEffect(()=>{o.applications&&o.applications.length===0&&r({applications:l})},[JSON.stringify(l)]);const m=[...i].every(f=>d.includes(f)),{featureMetrics:j}=Qs(s,u),[y,b]=x.useState(j);x.useEffect(()=>{j&&b(j)},[j]);const h=x.useMemo(()=>Uo((y==null?void 0:y.filter(f=>p===f.environment).filter(f=>d.includes(f.appName)))||[]).map(f=>({...f,appName:d.length>1?"all selected":f.appName,selectedApplications:d})),[y,p,JSON.stringify(d)]);return h?t.jsxs(Rt,{children:[t.jsxs(he,{container:!0,component:"header",spacing:2,children:[t.jsx(he,{item:!0,xs:12,md:4,children:t.jsx(L,{condition:n.size>0,show:t.jsx(us,{title:"Environments",values:n,selectedValues:[p],toggleValue:f=>{r({environment:f})}})})}),t.jsx(he,{item:!0,xs:12,md:6,children:t.jsx(L,{condition:i.size>0,show:t.jsx(us,{title:"Applications",values:i,selectedValues:d,toggleValues:()=>{r(m?{applications:[c]}:{applications:[...i]})},toggleValue:f=>{d.includes(f)?r({applications:d.filter(w=>w!==f)}):r({applications:[...d,f]})}})})}),t.jsx(he,{item:!0,xs:12,md:2,children:t.jsx(Go,{hoursBack:u,setHoursBack:f=>r({hoursBack:f})})})]}),t.jsx(Gl,{metrics:h,hoursBack:u})]}):null},Zl=(e,s)=>{const{feature:n}=W(e,s),a=n.environments.map(o=>o.name);return new Set(a)},ed=(e,s=ft)=>{const{featureMetrics:n=[]}=Qs(e,s),a=n.map(o=>o.appName);return new Set(a)},td=({enabled:e,value:s,onChange:n,filter:a,...o})=>{const{projects:r}=Js();if(!e)return null;const i=c=>({key:c.id,label:c.name,title:c.description||"",sx:{whiteSpace:"pre-line"}});let l;return a?l=r.filter(c=>a(c.id)).map(i):l=r.map(i),s&&!l.find(c=>c.key===s)&&l.push({key:s,label:s}),t.jsx(Ss,{label:"Project",options:l,value:s,onChange:n,...o})},sd=(e,s)=>{const n=new Set(e),a=new Set(s);return n.size!==a.size?!1:[...n].every(o=>a.has(o))},ps=g("div")(({theme:e})=>({display:"grid",gap:e.spacing(2)})),gs=g(Z)(({theme:e})=>({marginBottom:e.spacing(1)})),nd=g(Tt)({padding:0}),ad=({projectId:e,open:s,onClose:n,onClick:a,feature:o,changeRequests:r})=>{const i=A("projectId"),{project:l}=Ao(e),{isChangeRequestConfiguredInAnyEnv:c}=te(e),p=c(),u=x.useMemo(()=>{var j;return sd(o.environments.map(y=>y.name),((j=l.environments)==null?void 0:j.map(y=>y.environment))||[])},[o,l]),d=r?r.length>0:!1,m=o.dependencies.length>0||o.children.length>0;return t.jsx(L,{condition:u&&!m&&!d&&!p,show:t.jsx(ue,{open:s,onClose:n,onClick:a,title:"Confirm change project",primaryButtonText:"Change project",secondaryButtonText:"Cancel",children:t.jsxs(ps,{children:[t.jsx(gs,{severity:"success",children:"This feature flag is compatible with the new project."}),t.jsx("p",{children:"Are you sure you want to change the project for this flag?"})]})}),elseShow:t.jsx(ue,{open:s,onClick:n,title:"Confirm change project",primaryButtonText:"Close",children:t.jsxs(ps,{children:[t.jsx(gs,{severity:"warning",children:"Cannot proceed with the move"}),t.jsx(L,{condition:m,show:t.jsxs("p",{children:[t.jsx("span",{children:"The feature flag must not have any dependencies."})," ",t.jsx("br",{}),t.jsx("span",{children:"Please remove feature dependencies first."})]})}),t.jsx(L,{condition:!u,show:t.jsx("p",{children:"In order to move a feature flag between two projects, both projects must have the exact same environments enabled."})}),t.jsx(L,{condition:d,show:t.jsxs(t.Fragment,{children:[t.jsx("p",{children:"The feature flag must not have any pending change requests. This feature flag is currently referenced in the following change requests:"}),t.jsx(nd,{children:r==null?void 0:r.map(j=>t.jsx(Me,{children:t.jsxs(ae,{to:`/projects/${i}/change-requests/${j.id}`,children:["View change request"," ",j.id]})},j.id))})]})}),t.jsx(L,{condition:p,show:t.jsxs("p",{children:["You're not allowed to move the feature to project"," ",t.jsx(ae,{to:`/projects/${e}/settings/change-requests`,children:e}),". This project has change requests enabled."]})})]})})})},od=()=>{const{hasAccess:e}=x.useContext(Es),s=A("projectId"),n=A("featureId"),{feature:a,refetchFeature:o}=W(s,n),[r,i]=x.useState(!1),{changeFeatureProject:l}=Ge(),{setToastData:c,setToastApiError:p}=H(),[u,d]=x.useState(s),{projects:m}=Js(),j=le(),{changeRequests:y}=un(s,n),b=async()=>{try{u&&(await l(s,n,u),o(),c({text:"Project changed",type:"success"}),i(!1),j(`/projects/${u}/features/${n}/settings`,{replace:!0}))}catch(f){p(q(f))}},h=x.useMemo(()=>m.map(f=>f.id).filter(f=>e(Ut,f)),[m,e]);return h.length===0?null:t.jsxs(t.Fragment,{children:[t.jsx(td,{value:u,onChange:d,label:"Project",filter:f=>h.includes(f),enabled:!0}),t.jsx(K,{permission:Ut,onClick:()=>i(!0),disabled:u===s,projectId:s,children:"Save"}),t.jsx(ad,{changeRequests:y,projectId:u,open:r,feature:a,onClose:()=>i(!1),onClick:b})]})},rd=g("div")({display:"flex",alignItems:"center"}),id=g(z)(({theme:e})=>({fontSize:e.fontSizes.mainHeader})),cd=({projectId:e,featureId:s})=>{var r;const{feature:n}=W(e,s),a=le(),o=()=>{a(`/projects/${e}/features/${s}/edit`)};return t.jsxs(t.Fragment,{children:[t.jsxs(rd,{children:[t.jsx(id,{children:"Feature information"}),t.jsx(Re,{permission:Te,projectId:e,"data-loading":!0,onClick:o,tooltipProps:{title:"Edit"},children:t.jsx(We,{})})]}),t.jsxs(z,{children:["Name: ",t.jsx("strong",{children:n.name})]}),t.jsxs(z,{children:["Description:"," ",t.jsx("strong",{children:(r=n.description)!=null&&r.length?n.description:"no description"})]}),t.jsxs(z,{children:["Type: ",t.jsx("strong",{children:n.type})]}),t.jsxs(z,{children:["Impression Data:"," ",t.jsx("strong",{children:n.impressionData?"enabled":"disabled"})]})]})},Le="metadata",pt="project",ld=g("div")(({theme:e})=>({width:"20%",borderRight:`1px solid ${e.palette.divider}`,padding:e.spacing(2,0),[e.breakpoints.down("md")]:{width:"35%"}})),dd=g("div")(({theme:e})=>({padding:e.spacing(4),display:"flex",flexDirection:"column",width:400,"& > *":{margin:e.spacing(1,0)}})),ud=()=>{const e=A("projectId"),s=A("featureId"),[n,a]=x.useState(Le),{uiConfig:o}=fe();return t.jsx(Rt,{header:"Settings",sx:{padding:0},children:t.jsxs(B,{sx:{display:"flex"},children:[t.jsx(ld,{children:t.jsxs(Tt,{children:[t.jsx(Me,{sx:{padding:"0.75rem 2rem"},button:!0,onClick:()=>a(Le),selected:n===Le,children:"Metadata"},0),t.jsx(Me,{sx:{padding:"0.75rem 2rem"},button:!0,onClick:()=>a(pt),selected:n===pt,hidden:!o.flags.P,children:"Project"},1)]})}),t.jsxs(dd,{children:[t.jsx(L,{condition:n===Le,show:t.jsx(cd,{projectId:e,featureId:s})}),t.jsx(L,{condition:n===pt&&o.flags.P,show:t.jsx(od,{})})]})]})})},hs=g("strong")({wordBreak:"break-all"}),pd=()=>{const e=A("projectId"),s=A("featureId"),{features:n}=Eo({project:`IS:${e}`,archived:"IS:true"}),a=Io(e,{name:s});return n?n.some(r=>r.name===s)?t.jsxs("p",{children:["The feature ",t.jsx(hs,{children:s})," has been archived. You can find it on the"," ",t.jsx(ae,{to:`/projects/${e}?archived=IS%3Atrue`,children:"project overview with archived flags filter"}),"."]}):t.jsxs("p",{children:["The feature ",t.jsx(hs,{children:s})," does not exist. Would you like to"," ",t.jsx(ae,{to:a,children:"create it"}),"?"]}):null};var Pt={},gd=Ie;Object.defineProperty(Pt,"__esModule",{value:!0});var xn=Pt.default=void 0,hd=gd(Ee()),xd=t,fd=(0,hd.default)((0,xd.jsx)("path",{d:"m20.54 5.23-1.39-1.68C18.88 3.21 18.47 3 18 3H6c-.47 0-.88.21-1.16.55L3.46 5.23C3.17 5.57 3 6.02 3 6.5V19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6.5c0-.48-.17-.93-.46-1.27zM6.24 5h11.52l.81.97H5.44l.8-.97zM5 19V8h14v11H5zm8.45-9h-2.9v3H8l4 4 4-4h-2.55z"}),"ArchiveOutlined");xn=Pt.default=fd;var Ft={},yd=Ie;Object.defineProperty(Ft,"__esModule",{value:!0});var fn=Ft.default=void 0,md=yd(Ee()),jd=t,bd=(0,md.default)((0,jd.jsx)("path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm.5-13H11v6l5.2 3.2.8-1.3-4.5-2.7V7z"}),"WatchLaterOutlined");fn=Ft.default=bd;var Ot={},vd=Ie;Object.defineProperty(Ot,"__esModule",{value:!0});var yn=Ot.default=void 0,Sd=vd(Ee()),Cd=t,Td=(0,Sd.default)((0,Cd.jsx)("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H8V4h12v12zm-7-2h2v-3h3V9h-3V6h-2v3h-3v2h3z"}),"LibraryAddOutlined");yn=Ot.default=Td;const wd=({stale:e,showActive:s=!0})=>{if(!e&&!s)return null;const n=e?"Feature flag is deprecated.":"Feature flag is active.",a=e?"Stale":"Active";return t.jsx("div",{"data-loading":!0,children:t.jsx(Ae,{color:e?"error":"success",title:n,children:a})})},kd=e=>$o({key:"c",modifiers:["ctrl"],preventDefault:!1},()=>{var n;const s=(n=window.getSelection)==null?void 0:n.call(window);s&&(s.type==="None"||s.type==="Caret")&&e()});var _t={},Rd=Ie;Object.defineProperty(_t,"__esModule",{value:!0});var mn=_t.default=void 0,Dd=Rd(Ee()),Ad=t,Ed=(0,Dd.default)((0,Ad.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4H8c-1.1 0-1.99.9-1.99 2L6 21c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V11l-6-6zM8 21V7h6v5h5v9H8z"}),"FileCopyOutlined");mn=_t.default=Ed;const xs=18/8,Id=({name:e})=>{const[s,n]=x.useState(!1),{setToastData:a}=H(),o=()=>{try{Fo(e),n(!0);const i=setTimeout(()=>{n(!1)},3e3);return()=>{clearTimeout(i)}}catch{a({type:"error",text:"Could not copy feature name"})}},r=kd(o);return t.jsx(ee,{title:s?"Copied!":`Copy name (${r})`,arrow:!0,children:t.jsx(xe,{onClick:o,children:s?t.jsx(Po,{sx:i=>({fontSize:i.spacing(xs),color:i.palette.success.main})}):t.jsx(mn,{sx:i=>({fontSize:i.spacing(xs)})})})})},$d=g("div")(({theme:e})=>({backgroundColor:"none",marginBottom:e.spacing(2),borderBottom:`1px solid ${e.palette.divider}`,containerType:"inline-size"})),Bt=(e,s)=>({"@container (min-width: 650px)":s,"@supports not (container-type: inline-size)":{[e.breakpoints.up("md")]:s}}),jn=g("div")(({theme:e})=>({display:"flex",flexFlow:"row wrap",alignItems:"center",columnGap:e.spacing(1.5)})),Pd=g("div")(({theme:e})=>({display:"flex",alignItems:"center",columnGap:e.spacing(.5)})),Fd=g(jn)(({theme:e})=>({justifyContent:"space-between",columnGap:0,flexFlow:"column nowrap",alignItems:"flex-start",...Bt(e,{alignItems:"center",flexFlow:"row nowrap"})})),Od=g("div",{shouldForwardProp:e=>e!=="showOnNarrowScreens"})(({theme:e,showOnNarrowScreens:s})=>({display:s?"flex":"none",flexFlow:"row nowrap",alignItems:"center",...Bt(e,{display:s?"none":"flex"})})),_d=({children:e,label:s,onClick:n})=>t.jsx(No,{title:s,arrow:!0,onClick:a=>a.preventDefault(),children:t.jsx(xe,{"aria-label":s,onClick:n,children:e})}),Bd=g(Oo)({minWidth:0,maxWidth:"100%","& .MuiTabs-flexContainer":{minHeight:"unset"}}),zd=g(_o)(({theme:e})=>({textTransform:"none",width:"auto",fontSize:e.fontSizes.bodySize,padding:"0 !important",...Bt(e,{minWidth:100})}));g(ae)(()=>({maxWidth:"100%",textDecoration:"none","&:hover, &:focus":{textDecoration:"underline"}}));const Ld=e=>{const s=Je("enableLegacyVariants"),n=e.some(a=>{var o;return(o=a.variants)==null?void 0:o.length});return s||n},Md=({showOnNarrowScreens:e,feature:s,onFavorite:n,openStaleDialog:a,openDeleteDialog:o})=>t.jsxs(Od,{showOnNarrowScreens:e,children:[t.jsx(_d,{label:"Favorite this feature flag",onClick:n,"data-loading":!0,children:s.favorite?t.jsx(Lo,{}):t.jsx(Mo,{})}),t.jsx(Re,{permission:Vo,projectId:s.project,"data-loading":!0,component:ae,to:`/projects/${s.project}/features/${s.name}/copy`,tooltipProps:{title:"Clone"},children:t.jsx(yn,{})}),t.jsx(Re,{permission:Ws,projectId:s.project,tooltipProps:{title:"Archive feature flag"},"data-loading":!0,onClick:o,children:t.jsx(xn,{})}),t.jsx(Re,{onClick:a,permission:Te,projectId:s.project,tooltipProps:{title:"Toggle stale state"},"data-loading":!0,children:t.jsx(fn,{})})]}),Vd=({feature:e})=>{const s=A("projectId"),n=A("featureId"),{favorite:a,unfavorite:o}=Bo(),{refetchFeature:r}=W(s,n),{setToastData:i,setToastApiError:l}=H(),[c,p]=x.useState(!1),[u,d]=x.useState(!1),[m,j]=x.useState(!1),y=le(),{pathname:b}=zo(),h=`/projects/${s}/features/${n}`,f=Ld(e.environments),w=[{title:"Overview",path:`${h}`,name:"overview"},{title:"Metrics",path:`${h}/metrics`,name:"Metrics"},...f?[{title:"Variants",path:`${h}/variants`,name:"Variants"}]:[],{title:"Settings",path:`${h}/settings`,name:"Settings"},{title:"Event log",path:`${h}/logs`,name:"Event log"}],E=w.find($=>$.path===b)??w[0],O=async()=>{try{e.favorite?await o(s,e.name):await a(s,e.name),r()}catch{l("Something went wrong, could not update favorite")}},_=({showOnNarrowScreens:$})=>t.jsx(Md,{showOnNarrowScreens:$,feature:e,onFavorite:O,openStaleDialog:()=>j(!0),openDeleteDialog:()=>d(!0)});return t.jsxs(t.Fragment,{children:[t.jsxs($d,{children:[t.jsxs(jn,{children:[t.jsxs(Pd,{children:[t.jsx(z,{variant:"h1",children:e.name}),t.jsx(Id,{name:e.name})]}),e.stale?t.jsx(wd,{stale:!0}):null]}),t.jsxs(Fd,{children:[t.jsx(_,{showOnNarrowScreens:!0}),t.jsx(Bd,{value:E.path,indicatorColor:"primary",textColor:"primary","aria-label":"Feature flag tabs",variant:"scrollable",children:w.map($=>t.jsx(zd,{label:$.title,value:$.path,onClick:()=>y($.path),"data-testid":`TAB-${$.title}`},$.title))}),t.jsx(_,{})]})]}),e.children.length>0?t.jsx(At,{features:e.children,project:s,isOpen:u,onClose:()=>d(!1)}):t.jsx(Dt,{isOpen:u,onConfirm:()=>{y(`/projects/${s}`)},onClose:()=>d(!1),projectId:s,featureIds:[n]}),t.jsx(ar,{isStale:e.stale,isOpen:m,onClose:()=>{j(!1),r()},featureId:n,projectId:s}),t.jsx(nn,{open:c,setOpen:p})]})};g(ae)(()=>({maxWidth:"100%",textDecoration:"none","&:hover, &:focus":{textDecoration:"underline"}}));const Nd=()=>{const e=A("projectId"),s=A("featureId"),{feature:n,loading:a,error:o,status:r}=W(e,s),i=qo(a);return r===404?t.jsx(pd,{}):o!==void 0?t.jsx("div",{ref:i}):t.jsxs("div",{ref:i,children:[t.jsx(Vd,{feature:n}),t.jsxs(Us,{children:[t.jsx(be,{path:"metrics",element:t.jsx(Xl,{})}),t.jsx(be,{path:"logs",element:t.jsx(vr,{})}),t.jsx(be,{path:"variants",element:t.jsx(Ol,{})}),t.jsx(be,{path:"settings",element:t.jsx(ud,{})}),t.jsx(be,{path:"*",element:t.jsx(tl,{})})]})]})},Gd=Object.freeze(Object.defineProperty({__proto__:null,default:Nd},Symbol.toStringTag,{value:"Module"}));export{Gd as F,Wl as d};
